drop table if exists t1,t2,t3,t11,t12;
create table t1 (a int, b int, c int,primary key(a,b))partition by range columns(a,b)(partition r1 values less than (1,2),partition r2 values less than (2,3),partition r3 values less than(maxvalue,maxvalue));
Okay
insert into t1 values (1,1,0);
insert into t1 values (1,2,0);
insert into t1 values (1,3,0);
delete from t1 where a=1 and b=1;
insert into t1 values (1,1,0);
delete from t1 where a=1 and b=1;
delete from t1 where a=1 and b=2;
delete from t1 where a=1 and b=3;
insert into t1 values (1,2,0);
delete from t1 where a=1 and b=2;
insert into t1 values (1,2,0);
delete from t1 where a=1 and b=2;
drop table t1;
create hash partition function h1(x)'x*3+4';
create table t1(
a bigint not null,
b bigint not null default 0,
c bigint not null default 0,
d bigint not null default 0,
e bigint not null default 0,
f bigint not null default 0,
g bigint not null default 0,
h bigint not null default 0,
i bigint not null default 0,
j bigint not null default 0,
primary key (a)) partition by(ha1,h1,a);
Okay
insert into t1 (a) values (2),(4),(6),(8),(10),(12),(14),(16),(18),(20),(22),(24),(26),(23);
delete from t1 where a=26;
drop table t1;
drop partition function h1;
drop partition function h2;
ERROR HY000: YAO-5077: partition function 'h2' doesn't exist
create hash partition function h2(x)'x*2/4+7';
create table t1(
bool1 char (0) default NULL,
not_null varchar (20) NOT NULL default '',
misc integer not null,
primary key (not_null))partition by (ta1,h2,not_null);
failed to send request, err=-121, timeout=20000000
insert into t1 values (NULL ,'a',4),(NULL ,'b',5),(NULL ,'c',6),(NULL ,'d',7);
select * from t1 where misc > 5 and bool1 is null;
bool1	not_null	misc
NULL	c	6
NULL	d	7
delete from t1 where not_null='c';
delete from t1 where not_null='d';
select * from t1 where misc > 5 and bool1 is null;
bool1	not_null	misc
select count(*) from t1;
count(*)
2
select count(*) from t1;
count(*)
2
select count(*) from t1;
count(*)
2
drop table  t1;
drop partition function h2;
