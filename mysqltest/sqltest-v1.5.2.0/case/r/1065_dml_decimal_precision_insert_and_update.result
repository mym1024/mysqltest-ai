drop table if exists tt;
create table tt(k decimal(10,5) primary key,c1 decimal(5,4));
insert into tt values(12.1,1.1);
insert into tt values(12.12,1.1);
insert into tt values(12.123,1.1);
insert into tt values(12.1234,1.1);
insert into tt values(12.12345,1.1);
insert into tt values(12.123456,1.1);
ERROR 23000: YAO-5024: Duplicate entry ' <3001.16>=decimal:12.12345' for key 'PRIMARY'
select * from tt;
k	c1
12.1	1.1
12.12	1.1
12.123	1.1
12.1234	1.1
12.12345	1.1
drop table if exists tt;
create table tt(c1 decimal(5,4),k decimal(10,5) primary key);
replace into tt values(1.12,12.1);
select * from tt;
c1	k
1.12	12.1
replace into tt values(1.123,12.1);
select * from tt;
c1	k
1.123	12.1
replace into tt values(1.1234,12.1);
select * from tt;
c1	k
1.1234	12.1
replace into tt values(1.12345,12.1);
select * from tt;
c1	k
1.1234	12.1
drop table if exists tt;
create table tt(k decimal(5,4) primary key,c1 decimal(5,4));
insert into tt values(1.1,1.1);
insert into tt values(1.12,1.1);
insert into tt values(1.123,1.1);
insert into tt values(1.1234,1.1);
insert into tt values(1.12345,1.1);
ERROR 23000: YAO-5024: Duplicate entry ' <3003.16>=decimal:1.1234' for key 'PRIMARY'
select * from tt;
k	c1
1.1	1.1
1.12	1.1
1.123	1.1
1.1234	1.1
drop table if exists t1;
create table t1(c1 int,c2 decimal(5,3),c3 decimal(3,2), primary key(c1));
insert into t1 values(2,9.345,2.4);
update t1 set c3=c2 where c1=2;
select * from t1;
c1	c2	c3
2	9.345	9.34
replace into t1 values (3,9.300,2.4);
select * from t1;
c1	c2	c3
2	9.345	9.34
3	9.3	2.4
update t1 set c3=c2 where c1=3;
select * from t1;
c1	c2	c3
2	9.345	9.34
3	9.3	9.3
drop table if exists t1;
create table t1(c1 int,c2 decimal(5,3),c3 decimal(3,2), primary key(c2));
insert into t1 values(2,9.345,2.4);
select * from t1;
c1	c2	c3
2	9.345	2.4
update t1 set c3=c2;
select * from t1;
c1	c2	c3
2	9.345	9.34
drop table if exists t1;
create table t1(c1 int,c2 decimal(5,3),c3 decimal(3,2), primary key(c1));
insert into t1 values(1,26.345,2.4);
insert into t1 values(2,9.345,2.4);
select * from t1;
c1	c2	c3
1	26.345	2.4
2	9.345	2.4
update t1 set c3=c2 where c1=1;
ERROR HY000: YAO-58: Overflow occurred during convert decimal(5,3) to decimal(3,2) for table[test.t1] column[c3]
select * from t1;
c1	c2	c3
1	26.345	2.4
2	9.345	2.4
update t1 set c3=c2 where c1=2;
select * from t1;
c1	c2	c3
1	26.345	2.4
2	9.345	9.34
