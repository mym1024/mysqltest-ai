ALTER SYSTEM SET merge_delay_interval='6s' server_type=yaodatasvr;
ALTER SYSTEM SET major_freeze_wait_time='6s' server_type=yaoadminsvr;
ALTER SYSTEM SET  min_major_freeze_interval='5s' server_type=yaotxnsvr;
ALTER SYSTEM SET min_merge_interval='5s' server_type=yaodatasvr;
ALTER SYSTEM SET  max_merge_thread_num='20' server_type=yaodatasvr;
alter system set balance_max_concurrent_migrate_num=30 server_type=yaoadminsvr;
alter system set balance_max_migrate_in_per_ds=6 server_type=yaoadminsvr;
alter system set balance_max_migrate_out_per_ds=6 server_type=yaoadminsvr;
alter system set max_migrate_task_count=6 server_type=yaodatasvr;
drop table if exists t1,t2;
create table t1(c1 varchar(5) primary key, c2 int, c3 varchar(4));
insert into t1 values('123456',1,'a');
ERROR HY000: YAO-5611: Varchar is too long, tname[test.t1], cname[c1], clength[6]
insert into t1 values('12345  ',2,'b');
ERROR HY000: YAO-5611: Varchar is too long, tname[test.t1], cname[c1], clength[7]
insert into t1 values('12345',2,'b');
select length(c1),* from t1;
length(c1)	c1	c2	c3
5	12345	2	b
insert into t1 values('q',2,'c');
select length(c1),* from t1;
length(c1)	c1	c2	c3
5	12345	2	b
1	q	2	c
insert into t1 values('q',2,'d');
ERROR 23000: YAO-5024: Duplicate entry ' <3001.16>=varchar:q' for key 'PRIMARY'
select * from t1 where c1='q';
c1	c2	c3
q	2	c
select * from t1 where c1='12345';
c1	c2	c3
12345	2	b
select length(c1),* from t1;
length(c1)	c1	c2	c3
5	12345	2	b
1	q	2	c
replace into t1 values('q',3,'dw');
select * from t1 where c1='q';
c1	c2	c3
q	3	dw
select length(c1),* from t1;
length(c1)	c1	c2	c3
5	12345	2	b
1	q	3	dw
delete from t1 where c1='q';
select * from t1;
c1	c2	c3
12345	2	b
select length(c1),c1 from t1;
length(c1)	c1
5	12345
update t1 set c1='pt  ';
insert into t1 values('pt\t\t',1,'a');
select * from t1;
c1	c2	c3
pt			1	a
pt  	2	b
select * from t1 where c1='pt';
c1	c2	c3
pt	2	b
select length(c1) from t1;
length(c1)
4
4
select * from t1;
c1	c2	c3
pt			1	a
pt  	2	b
select * from t1 where c1='pt';
c1	c2	c3
pt	2	b
select length(c1) from t1;
length(c1)
4
4
drop table t1;
create table t2(c1 int, c2 varchar(5), c3 varchar(6), c4 varchar(6),primary key(c1));
create index idx_1 on t2(c2) storing(c4);
create index idx_2 on t2(c3) storing(c4);
__3002__idx__idx_1
__3002__idx__idx_2
insert into t2 values(1,'df','fg','de');
insert into t2 values(2,'df v   ','fg ','de');
ERROR HY000: YAO-5611: Varchar is too long, tname[test.t2], cname[c2], clength[7]
insert into t2 values(3,'df v ','fgr ','de');
insert into t2 values(4,'df v\t','fg ','de');
replace into t2 values(3,'dfv','fgd ','de');
select *, length(c2), length(c3) from t2;
c1	c2	c3	c4	length(c2)	length(c3)
1	df	fg	de	2	2
3	dfv	fgd 	de	3	4
4	df v		fg 	de	5	3
select *, length(c2), length(c3) from t2 where c2='df v';
c1	c2	c3	c4	length(c2)	length(c3)
select *, length(c2), length(c3) from t2 where c2='df v  ';
c1	c2	c3	c4	length(c2)	length(c3)
select *, length(c2), length(c3) from t2 where c3='fg';
c1	c2	c3	c4	length(c2)	length(c3)
1	df	fg	de	2	2
4	df v		fg 	de	5	3
select *, length(c2), length(c3) from t2 where c3='fgd';
c1	c2	c3	c4	length(c2)	length(c3)
3	dfv	fgd 	de	3	4
merge
major_freeze...
merge: DONE
select * from __3002__idx__idx_1;
c1	c2	c4
1	df	de
4	df v		de
3	dfv	de
select * from __3002__idx__idx_2;
c1	c3	c4
1	fg	de
4	fg 	de
3	fgd 	de
drop table t2;
