ALTER SYSTEM SET merge_delay_interval='6s' server_type=yaodatasvr;
ALTER SYSTEM SET major_freeze_wait_time='6s' server_type=yaoadminsvr;
ALTER SYSTEM SET  min_major_freeze_interval='5s' server_type=yaotxnsvr;
ALTER SYSTEM SET min_merge_interval='5s' server_type=yaodatasvr;
ALTER SYSTEM SET  max_merge_thread_num='20' server_type=yaodatasvr;
set @a=1;
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
Begin
Case 
When @a>0
Then
set @a=@a+1;   
Else
set @a=@a+10;    
End Case;
End|
INSERT INTO www VALUES (3,34);
select @a;
@a
2
INSERT INTO www VALUES (11,45);
select @a;
@a
3
set @a=0;
INSERT INTO www VALUES (4,44);
select @a;
@a
10
set @a=0;
INSERT INTO www VALUES (15,65);
select @a;
@a
10
select * from www;
c1	c2
3	34
4	44
11	45
15	65
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
add_num:LOOP
set @a=@a+1;
IF @a>=50 THEN LEAVE add_num;END IF;
END LOOP add_num;
END|
INSERT INTO www VALUES (6,35);
select @a;
@a
50
select * from www;
c1	c2
6	35
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
Declare num int Default 1;
set num=num+1;
set @a=num;
END|
INSERT INTO www VALUES (3,45);
select @a;
@a
2
select * from www;
c1	c2
3	45
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
If new.c2>20 Then
Set new.c2=20;
Else
Set new.c2=15;    
End If;
END|
INSERT INTO www VALUES (4,12);
INSERT INTO www VALUES (5,33);
select * from www;
c1	c2
4	15
5	20
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
repeat_loop:Repeat
set new.c1=new.c1+1;
Until new.c1>20
End Repeat repeat_loop;
END|
INSERT INTO www VALUES (4,45);
select * from www;
c1	c2
21	45
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
While new.c1<18 
Do
set new.c1=new.c1+1;
End While;
END|
INSERT INTO www VALUES (6,66);
select * from www;
c1	c2
18	66
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
loop_lable:Loop
If new.c2=43 Then
set new.c1=new.c1+1;
set new.c2=new.c2+1;
ITERATE loop_lable;
End If;
set new.c2=new.c2+1;
if new.c2>=50 then
LEAVE loop_lable;
End If;
End Loop;
END|
INSERT INTO www VALUES (3,34);
INSERT INTO www VALUES (5,45);
select * from www;
c1	c2
4	50
5	50
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
Case
When new.c2<20 Then
loop_lable:Loop
If new.c2=43 Then
set new.c1=new.c1+1;
set new.c2=new.c2+1;
ITERATE loop_lable;
End If;
set new.c2=new.c2+1;
if new.c2>=50 then
LEAVE loop_lable;
End If;
End Loop;
Else
set new.c2=100;
End Case;
END|
INSERT INTO www VALUES (4,10);
INSERT INTO www VALUES (6,22);
INSERT INTO www VALUES (10,15);
select * from www;
c1	c2
5	50
6	100
11	50
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @b=0;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
Case
When @a<2 Then
loop_lable:Loop
If @b=43 Then
set @a=@a+1;
set @b=@b+1;
ITERATE loop_lable;
End If;
set @b=@b+1;
if @b>=50 then
LEAVE loop_lable;
End If;
End Loop;
Else
set @b=100;
End Case;
END|
set @a=1,@b=0;
INSERT INTO www VALUES (3,10);
select @a, @b;
@a	@b
2	50
set @a=1,@b=55;
INSERT INTO www VALUES (4,12);
select @a, @b;
@a	@b
1	56
set @a=5,@b=0;
INSERT INTO www VALUES (5,23);
select @a, @b;
@a	@b
5	100
set @a=1,@b=0;
INSERT INTO www VALUES (11,33);
select @a, @b;
@a	@b
2	50
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
END|
INSERT INTO www VALUES (3,10);
select * from www;
c1	c2
3	10
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=1;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
INSERT INTO ww2 VALUES (1,10);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
If new.c2<20 Then
UPDATE ww2 SET c2=11 WHERE c1=1;
End If;
END|
INSERT INTO www VALUES (3,10);
select * from www;
c1	c2
3	10
select * from ww2;
c1	c2
1	11
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
INSERT INTO www VALUES (1,10);
INSERT INTO www VALUES (2,20);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
UPDATE www SET c2=11 WHERE c1=1;
INSERT INTO www VALUES (10,15);
DELETE FROM www WHERE c1=2;
END|
INSERT INTO www VALUES (3,30);
ERROR HY000: YAO-7022: Can't update table in stored function/trigger because it is already used by statement which invoked this stored funct
select * from www;
c1	c2
1	10
2	20
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
Case 
When new.c2<20 Then
set new.c2=new.c2+1;
Else
set new.c2=new.c2+100;
End Case;
END;|
INSERT INTO www VALUES (3,5);
INSERT INTO www VALUES (4,33);
INSERT INTO www VALUES (5,16);
INSERT INTO www VALUES (6,45);
select * from www;
c1	c2
3	6
4	133
5	17
6	145
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
add_num:LOOP
set new.c2=new.c2+1;
IF new.c2>=50 THEN LEAVE add_num;END IF;
END LOOP add_num;
END|
INSERT INTO www VALUES (3,25);
INSERT INTO www VALUES (4,66);
set @a=0;
INSERT INTO www VALUES (5,33);
select * from www;
c1	c2
3	50
4	67
5	50
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
add_num:LOOP
set @b=@b+1;
IF @b>=50 THEN LEAVE add_num;END IF;
END LOOP add_num;
END|
set @a=1,@b=0;
INSERT INTO www VALUES (2,22);
select @a, @b;
@a	@b
1	50
set @a=1,@b=55;
INSERT INTO www VALUES (3,33);
select @a, @b;
@a	@b
1	56
set @a=0,@b=10;
INSERT INTO www VALUES (4,44);
select @a, @b;
@a	@b
0	50
select * from www;
c1	c2
2	22
3	33
4	44
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
set new.c1=new.c1+1;
set new.c2=new.c2+100;
END|
INSERT INTO www VALUES (3,33);
set @a=0;
INSERT INTO www VALUES (5,55);
select * from www;
c1	c2
4	133
6	155
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
If new.c2>20 Then
Set new.c2=20;
Else
Set new.c2=15;    
End If;
END|
INSERT INTO www VALUES (2,33);
INSERT INTO www VALUES (4,4);
set @a=1;
INSERT INTO www VALUES (5,22);
select * from www;
c1	c2
2	20
4	15
5	20
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
While @b>0 AND @b<20
Do
set @b=@b+1;
End While;
END|
set @a=1,@b=1;
INSERT INTO www VALUES (3,34);
select @a, @b;
@a	@b
1	20
set @a=1,@b=0;
INSERT INTO www VALUES (4,56);
select @a, @b;
@a	@b
1	0
set @a=0,@b=0;
INSERT INTO www VALUES (5,12);
select @a, @b;
@a	@b
0	0
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
loop_lable:Loop
If new.c2=43 Then
set new.c1=new.c1+1;
set new.c2=new.c2+1;
ITERATE loop_lable;
End If;
set new.c2=new.c2+1;
if new.c2>=50 then
LEAVE loop_lable;
End If;
End Loop;
END|
INSERT INTO www VALUES (2,21);
INSERT INTO www VALUES (4,45);
INSERT INTO www VALUES (5,55);
select * from www;
c1	c2
3	50
4	50
5	56
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
Case
When new.c2<100 Then
lable_loop:Loop
If new.c2=21 Then
set new.c1=new.c1+1;
set new.c2=new.c2+1;
ITERATE lable_loop;
End If;
set new.c2=new.c2+1;
If new.c2>55 Then
LEAVE lable_loop;
End If;
End Loop;
Else
set new.c2=125;
End Case;
END|
INSERT INTO www VALUES (2,11);
INSERT INTO www VALUES (4,21);
INSERT INTO www VALUES (6,33);
INSERT INTO www VALUES (8,58);
INSERT INTO www VALUES (10,111);
select * from www;
c1	c2
3	56
5	56
6	56
8	59
10	125
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
UPDATE www SET c2=11 WHERE c1=1;
INSERT INTO www VALUES (10,15);
END|
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
If new.c2<20 Then
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=1;
UPDATE www SET c2=11 WHERE c1=1;
INSERT INTO www VALUES (10,15);
DELETE FROM www WHERE c1=2;
End If;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
UPDATE www SET c2=11 WHERE c1=1;
INSERT INTO www VALUES (10,15);
DELETE FROM www WHERE c1=2;
END|
INSERT INTO www VALUES (5,10);
ERROR HY000: YAO-7022: Can't update table in stored function/trigger because it is already used by statement which invoked this stored funct
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
repeat_loop:Repeat
set new.c1=new.c1+1;
Until new.c1>20
End Repeat repeat_loop;
END|
INSERT INTO www VALUES (3,56);
INSERT INTO www VALUES (22,82);
select * from www;
c1	c2
21	56
23	82
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
If new.c2>20 Then
Set new.c2=20;
Else
Set new.c2=15;    
End If;
END|
INSERT INTO www VALUES (3,35);
INSERT INTO www VALUES (6,6);
select * from www;
c1	c2
3	20
6	15
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
While new.c1<18
Do
set new.c1=new.c1+1;
End While;
END|
INSERT INTO www VALUES (3,14);
INSERT INTO www VALUES (20,685);
select * from www;
c1	c2
18	14
20	685
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
loop_lable:Loop
If new.c2=35 Then
set new.c1=new.c1+1;
set new.c2=new.c2+1;
ITERATE loop_lable;
End If;
set new.c2=new.c2+1;
if new.c2>=50 then
LEAVE loop_lable;
End If;
End Loop;
END|
INSERT INTO www VALUES (3,23);
INSERT INTO www VALUES (5,40);
INSERT INTO www VALUES (7,55);
select * from www;
c1	c2
4	50
5	50
7	56
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
Case
When new.c2<75 Then
loop_lable:Loop
If new.c2=35 Then
set new.c1=new.c1+1;
set new.c2=new.c2+1;
ITERATE loop_lable;
End If;
set new.c2=new.c2+1;
if new.c2>=50 then
LEAVE loop_lable;
End If;
End Loop;
Else
set new.c2=111;
End Case;
END|
INSERT INTO www VALUES (3,14);
INSERT INTO www VALUES (5,40);
INSERT INTO www VALUES (7,55);
select * from www;
c1	c2
4	50
5	50
7	56
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
If new.c2<20 Then
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=1;
UPDATE www SET c2=11 WHERE c1=1;
INSERT INTO www VALUES (10,15);
DELETE FROM www WHERE c1=2;
End If;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
UPDATE www SET c2=11 WHERE c1=1;
INSERT INTO www VALUES (10,15);
DELETE FROM www WHERE c1=2;
END|
INSERT INTO www VALUES (5,15);
ERROR HY000: YAO-7022: Can't update table in stored function/trigger because it is already used by statement which invoked this stored funct
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
Case
When @a<20 Then
loop_lable:Loop
If @b=44 Then
set @a=@a+1;
set @b=@b+1;
ITERATE loop_lable;
End If;
set @b=@b+1;
if @b>=50 then
LEAVE loop_lable;
End If;
End Loop;
Else
set @b=123;
End Case;
END|
set @a=1,@b=1;
INSERT INTO www VALUES (2,442);
SELECT @a,@b;
@a	@b
2	50
set @a=1,@b=46;
INSERT INTO www VALUES (4,24);
SELECT @a,@b;
@a	@b
1	50
set @a=1,@b=66;
INSERT INTO www VALUES (3,344);
SELECT @a,@b;
@a	@b
1	67
set @a=77,@b=1;
INSERT INTO www VALUES (8,652);
SELECT @a,@b;
@a	@b
77	123
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
BEFORE INSERT ON www
FOR EACH ROW
BEGIN
DELETE FROM www WHERE c1=1;
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=1;
UPDATE www SET c2=11 WHERE c1=1;
INSERT INTO www VALUES (10,15);
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
Case 
When new.c2<5 Then
set @a=@a+1;
Else
set @a=@a+100;
End Case;
END|
INSERT INTO www VALUES (2,2);
select @a;
@a
2
set @a=1;
INSERT INTO www VALUES (6,6);
select @a;
@a
101
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
Case 
When @a>0
Then
set @a=@a+1;
Else
set @a=@a+10;
End Case;
END|
INSERT INTO www VALUES (2,5);
select @a;
@a
2
set @a=0;
INSERT INTO www VALUES (3,6);
select @a;
@a
10
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
set @a=new.c2+1;
add_num:LOOP
set @a=@a+1;
IF @a>=50 THEN LEAVE add_num;END IF;
END LOOP add_num;
END|
INSERT INTO www VALUES (4,32);
select @a;
@a
50
set @a=1;
INSERT INTO www VALUES (5,63);
select @a;
@a
65
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
add_num:LOOP
set @a=@a+1;
IF @a>=50 THEN LEAVE add_num;END IF;
END LOOP add_num;
END|
INSERT INTO www VALUES (7,23);
select @a;
@a
50
set @a=55;
INSERT INTO www VALUES (8,76);
select @a;
@a
56
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
set @a=@a+100;
END|
INSERT INTO www VALUES (9,87);
select @a;
@a
101
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
If new.c2<20 Then
Set @a=new.c1+1;
Else
Set @a=111;    
End If;
END|
INSERT INTO www VALUES (5,13);
select @a;
@a
6
set @a=1;
INSERT INTO www VALUES (6,68);
select @a;
@a
111
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
If @a>0 Then
set @a=10;
Else
set @a=@a+100;
End If;
END|
INSERT INTO www VALUES (3,868);
select @a;
@a
10
set @a=0;
INSERT INTO www VALUES (4,210);
select @a;
@a
100
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
set @a=new.c1+1;
repeat_loop:Repeat
set @a=@a+1;
Until @a>20
End Repeat repeat_loop;
END|
INSERT INTO www VALUES (10,523);
select @a;
@a
21
set @a=1;
INSERT INTO www VALUES (33,13);
select @a;
@a
35
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
repeat_loop:Repeat
set @a=@a+1;
Until @a>20
End Repeat repeat_loop;
END|
INSERT INTO www VALUES (8,22);
select @a;
@a
21
set @a=44;
INSERT INTO www VALUES (9,73);
select @a;
@a
45
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
set @a=new.c2;
While @a>0 AND @a<44
Do
set @a=@a+1;
End While;
END|
INSERT INTO www VALUES (2,2);
select @a;
@a
44
set @a=1;
INSERT INTO www VALUES (3,55);
select @a;
@a
55
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
While @a>0 AND @a<25
Do
set @a=@a+1;
End While;
set @a=@a+1;
END|
INSERT INTO www VALUES (5,73);
select @a;
@a
26
set @a=0;
INSERT INTO www VALUES (6,5);
select @a;
@a
1
drop table if exists www;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
loop_lable:Loop
If @b=35 Then
set @a=@a+1;
set @b=@b+1;
ITERATE loop_lable;
End If;
set @b=@b+1;
if @b>=55 then
LEAVE loop_lable;
End If;
End Loop;
END|
set @a=1,@b=1;
INSERT INTO www VALUES (8,25);
select @a, @b;
@a	@b
2	55
set @a=1,@b=44;
INSERT INTO www VALUES (9,16);
select @a, @b;
@a	@b
1	55
set @a=1,@b=60;
INSERT INTO www VALUES (10,54);
select @a, @b;
@a	@b
1	61
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into ww2 values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
UPDATE ww2 SET c2=8 WHERE c1=new.c1-1;
END|
INSERT INTO www VALUES (2,5);
select * from ww2;
c1	c2
1	8
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into ww2 values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
UPDATE ww2 SET c2=3 WHERE c1=1;
END|
INSERT INTO www VALUES (4,3);
select * from ww2;
c1	c2
1	3
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
If @a<22 Then
set @a=@a+5;
INSERT INTO ww2 VALUES (@a,new.c2+10);
Else
set @a=@a+100;
End If;
END|
set @a=1;
insert into www values(1,1);
INSERT INTO www VALUES (2,2);
set @a=50;
INSERT INTO www VALUES (3,5);
SELECT *, @a FROM ww2;
c1	c2	@a
6	11	150
11	12	150
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into www values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
If @a<21 Then
set @a=@a+4;
INSERT INTO ww2 VALUES (@a,@a+3);
Else
set @a=@a+100;
End If;
END|
set @a=1;
INSERT INTO www VALUES (3,75);
SELECT * FROM ww2;
c1	c2
5	8
set @a=50;
INSERT INTO www VALUES (4,423);
SELECT @a;
@a
150
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into ww2 values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
DELETE FROM ww2 WHERE c1=new.c1-1;
END|
INSERT INTO www VALUES (2,22);
SELECT * FROM ww2;
c1	c2
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into ww2 values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
DELETE FROM ww2 WHERE c1=1;
END|
INSERT INTO www VALUES (4,4);
SELECT * FROM ww2;
c1	c2
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into ww2 values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
If new.c2<20 Then
INSERT INTO ww2 VALUES (12,new.c2+50);
Else
DELETE FROM ww2 WHERE c1=new.c2-21;
End If;
END|
INSERT INTO www VALUES (4,4);
SELECT * FROM ww2;
c1	c2
1	1
12	54
INSERT INTO www VALUES (3,22);
SELECT * FROM ww2;
c1	c2
12	54
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into ww2 values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
Case
When @a<5 Then
loop_lable:Loop
If @b=30 Then
set @a=@a+1;
set @b=@b+1;
ITERATE loop_lable;
End If;
set @b=@b+1;
if @b>=50 then
LEAVE loop_lable;
End If;
End Loop;
Else
set @b=100;
If @a<21 Then
set @a=@a+4;
INSERT INTO ww2 VALUES (@a,@a+3);
End IF;
DELETE FROM ww2 WHERE c1=1;
End Case;
END|
set @a=1,@b=1;
INSERT INTO www VALUES (2,34);
SELECT @a,@b;
@a	@b
2	50
set @a=1,@b=44;
INSERT INTO www VALUES (3,22);
SELECT @a,@b;
@a	@b
1	50
set @a=1,@b=55;
INSERT INTO www VALUES (4,437);
SELECT @a,@b;
@a	@b
1	56
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into www values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
END|
INSERT INTO www VALUES (2,2);
SELECT * FROM www;
c1	c2
1	1
2	2
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=new.c1-1;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=1;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
set new.c1=new.c1+1;
END|
ERROR HY000: YAO-7013: after trigger does not support this function
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=new.c1-1;
set new.c1=new.c1+1;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=1;
set @a=@a+1;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
Case 
When old.c2<20 Then
set old.c2=old.c2+1;   
Else
set old.c2=old.c2+10;    
End Case;
END|
ERROR HY000: YAO-7007: There is no OLD row in on INSERT trigger
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
Case
When old.c2<20 Then
loop_lable:Loop
If old.c2=43 Then
set old.c1=old.c1+1;
set old.c2=old.c2+1;
ITERATE loop_lable;
End If;
set old.c2=old.c2+1;
if old.c2>=50 then
LEAVE loop_lable;
End If;
End Loop;
Else
set old.c2=100;
End Case;
END|
ERROR HY000: YAO-7007: There is no OLD row in on INSERT trigger
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
Case 
When @a>0
Then
set @a=@a+1;
Else
set @a=@a+10;
End Case;
END|
set @a=1;
INSERT INTO www VALUES (2,52);
SELECT @a;
@a
2
set @a=0;
INSERT INTO www VALUES (3,453);
SELECT @a;
@a
10
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
add_num:LOOP
set @a=@a+1;
IF @a>=50 THEN LEAVE add_num;END IF;
END LOOP add_num;
END|
set @a=1;
INSERT INTO www VALUES (4,78);
SELECT @a;
@a
50
set @a=55;
INSERT INTO www VALUES (5,13);
SELECT @a;
@a
56
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
set @a=@a+122;
END|
INSERT INTO www VALUES (6,114);
SELECT @a;
@a
123
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
If @a>0 Then
set @a=@a+10;
Else
set @a=@a+100;
End If;
END|
set @a=1;
INSERT INTO www VALUES (7,56);
SELECT @a;
@a
11
set @a=0;
INSERT INTO www VALUES (8,132);
SELECT @a;
@a
100
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
repeat_loop:Repeat
set @a=@a+1;
Until @a>20
End Repeat repeat_loop;
END|
set @a=1;
INSERT INTO www VALUES (9,34);
SELECT @a;
@a
21
set @a=23;
INSERT INTO www VALUES (10,64);
SELECT @a;
@a
24
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
While @a<35
Do
set @a=@a+1;
End While;
END|
set @a=1;
INSERT INTO www VALUES (11,75);
SELECT @a;
@a
35
set @a=45;
INSERT INTO www VALUES (12,875);
SELECT @a;
@a
45
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
loop_lable:Loop
If @b=35 Then
set @a=@a+1;
set @b=@b+1;
ITERATE loop_lable;
End If;
set @b=@b+1;
if @b>=60 then
LEAVE loop_lable;
End If;
End Loop;
END|
set @a=1,@b=1;
INSERT INTO www VALUES (2,23);
SELECT @a,@b;
@a	@b
2	60
set @a=1,@b=45;
INSERT INTO www VALUES (3,35);
SELECT @a,@b;
@a	@b
1	60
set @a=1,@b=66;
INSERT INTO www VALUES (4,62);
SELECT @a,@b;
@a	@b
1	67
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
INSERT INTO ww2 VALUES (1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
UPDATE ww2 SET c2=11 WHERE c1=1;
END|
INSERT INTO www VALUES (2,4);
SELECT * FROM ww2;
c1	c2
1	11
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
INSERT INTO ww2 VALUES (1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
If @a<15 Then
set @a=@a+4;
INSERT INTO ww2 VALUES (@a,@a+1);
End If;
END|
INSERT INTO www VALUES (2,4);
SELECT * FROM ww2;
c1	c2
1	1
5	6
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into ww2 values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
DELETE FROM ww2 WHERE c1=1;
END|
INSERT INTO www VALUES (2,2);
SELECT * FROM ww2;
c1	c2
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
INSERT INTO www VALUES (1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
Case
When @a<10 Then
loop_lable:Loop
If @b=44 Then
set @a=@a+1;
set @b=@b+1;
ITERATE loop_lable;
End If;
set @b=@b+1;
if @b>=60 then
LEAVE loop_lable;
End If;
End Loop;
Else
set @b=234;
UPDATE www SET c2=11 WHERE c1=1;
End Case;
END|
set @a=1,@b=1;
INSERT INTO www VALUES (2,298);
SELECT @a,@b;
@a	@b
2	60
set @a=1,@b=55;
INSERT INTO www VALUES (3,66);
SELECT @a,@b;
@a	@b
1	60
set @a=1,@b=66;
INSERT INTO www VALUES (4,25);
SELECT @a,@b;
@a	@b
1	67
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
create table ww2(c1 int primary key, c2 int);
insert into www values(1,1);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
END|
INSERT INTO www VALUES (2,2);
SELECT * FROM www;
c1	c2
1	1
2	2
drop table if exists www,ww2;
drop trigger if exists test;
create table www(c1 int primary key, c2 int);
set @a=1;
set @a=1,@b=1;
CREATE TRIGGER test
AFTER INSERT ON www
FOR EACH ROW
BEGIN
PREPARE stmt1 FROM SELECT * FROM www WHERE c1=1;
END|
ERROR HY000: YAO-7013: trigger does not support prepare statement now
