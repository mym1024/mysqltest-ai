ALTER SYSTEM SET merge_delay_interval='6s' server_type=yaodatasvr;
ALTER SYSTEM SET major_freeze_wait_time='6s' server_type=yaoadminsvr;
ALTER SYSTEM SET  min_major_freeze_interval='5s' server_type=yaotxnsvr;
ALTER SYSTEM SET min_merge_interval='5s' server_type=yaodatasvr;
ALTER SYSTEM SET  max_merge_thread_num='20' server_type=yaodatasvr;
drop table if exists t1;
alter system set min_drop_cache_wait_time='10s' server_type=yaodatasvr;
create table t1(id int primary key,c1 int,c2 decimal(25,0)) partition by range columns(id)(partition r0 values less than(10),partition r1 values less than maxvalue);
"refresh_schema"
Okay
show table rules;
table_id	start_version	table_name	partition_type	prefix_name	rule_name	par_list
3001	2	t1	1	t1#r0,t1#r1	__range@3001	id
show partition groups;
group_name	start_version	paxos_id	reserver_field1
t1#r0	2	0	NULL
t1#r1	2	1	NULL
drop table if exists t1;
create table t1(id int primary key,c1 int,c2 decimal(25,0)) partition by range columns(id)(partition r0 values less than(10),partition r1 values less than maxvalue);
create index t1_index1 on t1 (c1) storing (c2);
create index t1_index2 on t1 (c2) storing (c1);
create or replace sequence seq;
"refresh_schema"
Okay
insert into t1 values(nextval for seq,nextval for seq+nextval for seq,0);
insert into t1 values(nextval for seq,nextval for seq+nextval for seq,prevval for seq),(nextval for seq,nextval for seq+nextval for seq,prevval for seq),(nextval for seq,nextval for seq+nextval for seq,prevval for seq),(nextval for seq,nextval for seq+nextval for seq,prevval for seq),(nextval for seq,nextval for seq+nextval for seq,prevval for seq),(nextval for seq,nextval for seq+nextval for seq,prevval for seq),(nextval for seq,nextval for seq+nextval for seq,prevval for seq),(nextval for seq,nextval for seq+nextval for seq,prevval for seq);
"merge"
major_freeze...
merge: DONE
__3002__idx__t1_index1
__3002__idx__t1_index2
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	0
2	4	1
3	6	1
4	8	1
5	10	1
6	12	1
7	14	1
8	16	1
9	18	1
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	0
2	4	1
3	6	1
4	8	1
5	10	1
6	12	1
7	14	1
8	16	1
9	18	1
select * from t1;
id	c1	c2
1	2	0
2	4	1
3	6	1
4	8	1
5	10	1
6	12	1
7	14	1
8	16	1
9	18	1
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	0
2	4	1
3	6	1
4	8	1
5	10	1
6	12	1
7	14	1
8	16	1
9	18	1
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	0
2	4	1
3	6	1
4	8	1
5	10	1
6	12	1
7	14	1
8	16	1
9	18	1
update t1 set c1 =3 where id < prevval for seq;
select * from t1;
id	c1	c2
1	3	0
2	3	1
3	3	1
4	3	1
5	3	1
6	3	1
7	3	1
8	3	1
9	18	1
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	0
2	3	1
3	3	1
4	3	1
5	3	1
6	3	1
7	3	1
8	3	1
9	18	1
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	0
2	3	1
3	3	1
4	3	1
5	3	1
6	3	1
7	3	1
8	3	1
9	18	1
select * from t1;
id	c1	c2
1	3	0
2	3	1
3	3	1
4	3	1
5	3	1
6	3	1
7	3	1
8	3	1
9	18	1
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	0
2	3	1
3	3	1
4	3	1
5	3	1
6	3	1
7	3	1
8	3	1
9	18	1
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	0
2	3	1
3	3	1
4	3	1
5	3	1
6	3	1
7	3	1
8	3	1
9	18	1
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	10	0
2	11	1
3	12	1
4	13	1
5	14	1
6	15	1
7	16	1
8	17	1
9	18	1
select * from __3002__idx__t1_index1;
id	c1	c2
1	10	0
2	11	1
3	12	1
4	13	1
5	14	1
6	15	1
7	16	1
8	17	1
9	18	1
select * from __3002__idx__t1_index2;
id	c1	c2
1	10	0
2	11	1
3	12	1
4	13	1
5	14	1
6	15	1
7	16	1
8	17	1
9	18	1
create or replace sequence seq;
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	1	0
2	2	1
3	3	1
4	4	1
5	5	1
6	6	1
7	7	1
8	8	1
9	9	1
select * from __3002__idx__t1_index1;
id	c1	c2
1	1	0
2	2	1
3	3	1
4	4	1
5	5	1
6	6	1
7	7	1
8	8	1
9	9	1
select * from __3002__idx__t1_index2;
id	c1	c2
1	1	0
2	2	1
3	3	1
4	4	1
5	5	1
6	6	1
7	7	1
8	8	1
9	9	1
create or replace sequence seq;
update t1 set c2 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	1	1
2	2	2
3	3	3
4	4	4
5	5	5
6	6	6
7	7	7
8	8	8
9	9	9
select * from __3002__idx__t1_index1;
id	c1	c2
1	1	1
2	2	2
3	3	3
4	4	4
5	5	5
6	6	6
7	7	7
8	8	8
9	9	9
select * from __3002__idx__t1_index2;
id	c1	c2
1	1	1
2	2	2
3	3	3
4	4	4
5	5	5
6	6	6
7	7	7
8	8	8
9	9	9
create or replace sequence seq;
update t1 set c1 = nextval for seq + nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	2	1
2	4	2
3	6	3
4	8	4
5	10	5
6	12	6
7	14	7
8	16	8
9	18	9
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	1
2	4	2
3	6	3
4	8	4
5	10	5
6	12	6
7	14	7
8	16	8
9	18	9
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	1
2	4	2
3	6	3
4	8	4
5	10	5
6	12	6
7	14	7
8	16	8
9	18	9
create or replace sequence seq;
update t1 set c2 = nextval for seq + nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
create or replace sequence seq;
update t1 set c1 = nextval for seq + prevval for seq where id >=1;
ERROR 25S03: YAO-119: Unknown error, error code = 1
select * from t1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
create or replace sequence seq;
update t1 set c2 = nextval for seq + prevval for seq where id >=1;
ERROR 25S03: YAO-119: Unknown error, error code = 1
select * from t1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
create or replace sequence seq;
select nextval for seq from t1;
nextval for seq
1
2
3
4
5
6
7
8
9
update t1 set c1 = prevval for seq + prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	18	2
2	18	4
3	18	6
4	18	8
5	18	10
6	18	12
7	18	14
8	18	16
9	18	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	18	2
2	18	4
3	18	6
4	18	8
5	18	10
6	18	12
7	18	14
8	18	16
9	18	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	18	2
2	18	4
3	18	6
4	18	8
5	18	10
6	18	12
7	18	14
8	18	16
9	18	18
create or replace sequence seq;
select nextval for seq from t1;
nextval for seq
1
2
3
4
5
6
7
8
9
update t1 set c2 = prevval for seq + prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	18	18
2	18	18
3	18	18
4	18	18
5	18	18
6	18	18
7	18	18
8	18	18
9	18	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	18	18
2	18	18
3	18	18
4	18	18
5	18	18
6	18	18
7	18	18
8	18	18
9	18	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	18	18
2	18	18
3	18	18
4	18	18
5	18	18
6	18	18
7	18	18
8	18	18
9	18	18
create or replace sequence seq minvalue 1 maxvalue 3 cycle;
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	1	18
2	2	18
3	3	18
4	1	18
5	2	18
6	3	18
7	1	18
8	2	18
9	3	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	1	18
4	1	18
7	1	18
2	2	18
5	2	18
8	2	18
3	3	18
6	3	18
9	3	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	1	18
2	2	18
3	3	18
4	1	18
5	2	18
6	3	18
7	1	18
8	2	18
9	3	18
create or replace sequence seq minvalue 1 maxvalue 3 cycle;
update t1 set c2 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	1	1
2	2	2
3	3	3
4	1	1
5	2	2
6	3	3
7	1	1
8	2	2
9	3	3
select * from __3002__idx__t1_index1;
id	c1	c2
1	1	1
4	1	1
7	1	1
2	2	2
5	2	2
8	2	2
3	3	3
6	3	3
9	3	3
select * from __3002__idx__t1_index2;
id	c1	c2
1	1	1
4	1	1
7	1	1
2	2	2
5	2	2
8	2	2
3	3	3
6	3	3
9	3	3
create or replace sequence seq as decimal(3,0) minvalue 20;
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	20	1
2	21	2
3	22	3
4	23	1
5	24	2
6	25	3
7	26	1
8	27	2
9	28	3
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	1
2	21	2
3	22	3
4	23	1
5	24	2
6	25	3
7	26	1
8	27	2
9	28	3
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	1
4	23	1
7	26	1
2	21	2
5	24	2
8	27	2
3	22	3
6	25	3
9	28	3
create or replace sequence seq as decimal(3,0) minvalue 20;
update t1 set c2 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	20	20
2	21	21
3	22	22
4	23	23
5	24	24
6	25	25
7	26	26
8	27	27
9	28	28
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	20
2	21	21
3	22	22
4	23	23
5	24	24
6	25	25
7	26	26
8	27	27
9	28	28
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	20
2	21	21
3	22	22
4	23	23
5	24	24
6	25	25
7	26	26
8	27	27
9	28	28
create or replace sequence seq as decimal(3,0) minvalue 20 maxvalue 23 cycle;
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	20	20
2	21	21
3	22	22
4	23	23
5	20	24
6	21	25
7	22	26
8	23	27
9	20	28
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	20
5	20	24
9	20	28
2	21	21
6	21	25
3	22	22
7	22	26
4	23	23
8	23	27
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	20
2	21	21
3	22	22
4	23	23
5	20	24
6	21	25
7	22	26
8	23	27
9	20	28
create or replace sequence seq as decimal(3,0) minvalue 20 maxvalue 23 cycle;
update t1 set c2 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	20	20
2	21	21
3	22	22
4	23	23
5	20	20
6	21	21
7	22	22
8	23	23
9	20	20
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	20
5	20	20
9	20	20
2	21	21
6	21	21
3	22	22
7	22	22
4	23	23
8	23	23
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	20
5	20	20
9	20	20
2	21	21
6	21	21
3	22	22
7	22	22
4	23	23
8	23	23
update t1 set c1 = prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	20	20
2	20	21
3	20	22
4	20	23
5	20	20
6	20	21
7	20	22
8	20	23
9	20	20
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	20
2	20	21
3	20	22
4	20	23
5	20	20
6	20	21
7	20	22
8	20	23
9	20	20
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	20
5	20	20
9	20	20
2	20	21
6	20	21
3	20	22
7	20	22
4	20	23
8	20	23
update t1 set c2 = prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
create or replace sequence seq quick;
update t1 set c1 = prevval for seq where id >=1;
ERROR 25S03: YAO-119: Unknown error, error code = 1
select * from t1;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
create or replace sequence seq quick;
update t1 set c2 = prevval for seq where id >=1;
ERROR 25S03: YAO-119: Unknown error, error code = 1
select * from t1;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
select * from __3002__idx__t1_index1;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
select * from __3002__idx__t1_index2;
id	c1	c2
1	20	20
2	20	20
3	20	20
4	20	20
5	20	20
6	20	20
7	20	20
8	20	20
9	20	20
create or replace sequence seq quick;
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	1	20
2	2	20
3	3	20
4	4	20
5	5	20
6	6	20
7	7	20
8	8	20
9	9	20
select * from __3002__idx__t1_index1;
id	c1	c2
1	1	20
2	2	20
3	3	20
4	4	20
5	5	20
6	6	20
7	7	20
8	8	20
9	9	20
select * from __3002__idx__t1_index2;
id	c1	c2
1	1	20
2	2	20
3	3	20
4	4	20
5	5	20
6	6	20
7	7	20
8	8	20
9	9	20
create or replace sequence seq quick;
update t1 set c2 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	1	1
2	2	2
3	3	3
4	4	4
5	5	5
6	6	6
7	7	7
8	8	8
9	9	9
select * from __3002__idx__t1_index1;
id	c1	c2
1	1	1
2	2	2
3	3	3
4	4	4
5	5	5
6	6	6
7	7	7
8	8	8
9	9	9
select * from __3002__idx__t1_index2;
id	c1	c2
1	1	1
2	2	2
3	3	3
4	4	4
5	5	5
6	6	6
7	7	7
8	8	8
9	9	9
create or replace sequence seq quick;
update t1 set c1 = nextval for seq+nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	2	1
2	4	2
3	6	3
4	8	4
5	10	5
6	12	6
7	14	7
8	16	8
9	18	9
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	1
2	4	2
3	6	3
4	8	4
5	10	5
6	12	6
7	14	7
8	16	8
9	18	9
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	1
2	4	2
3	6	3
4	8	4
5	10	5
6	12	6
7	14	7
8	16	8
9	18	9
create or replace sequence seq quick;
update t1 set c2 = nextval for seq+nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	2	2
2	4	4
3	6	6
4	8	8
5	10	10
6	12	12
7	14	14
8	16	16
9	18	18
update t1 set c1 = nextval for seq+prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	19	2
2	20	4
3	21	6
4	22	8
5	23	10
6	24	12
7	25	14
8	26	16
9	27	18
select * from __3002__idx__t1_index1;
id	c1	c2
1	19	2
2	20	4
3	21	6
4	22	8
5	23	10
6	24	12
7	25	14
8	26	16
9	27	18
select * from __3002__idx__t1_index2;
id	c1	c2
1	19	2
2	20	4
3	21	6
4	22	8
5	23	10
6	24	12
7	25	14
8	26	16
9	27	18
update t1 set c2 = nextval for seq+prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	19	37
2	20	38
3	21	39
4	22	40
5	23	41
6	24	42
7	25	43
8	26	44
9	27	45
select * from __3002__idx__t1_index1;
id	c1	c2
1	19	37
2	20	38
3	21	39
4	22	40
5	23	41
6	24	42
7	25	43
8	26	44
9	27	45
select * from __3002__idx__t1_index2;
id	c1	c2
1	19	37
2	20	38
3	21	39
4	22	40
5	23	41
6	24	42
7	25	43
8	26	44
9	27	45
update t1 set c1 = prevval for seq+prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	54	37
2	54	38
3	54	39
4	54	40
5	54	41
6	54	42
7	54	43
8	54	44
9	54	45
select * from __3002__idx__t1_index1;
id	c1	c2
1	54	37
2	54	38
3	54	39
4	54	40
5	54	41
6	54	42
7	54	43
8	54	44
9	54	45
select * from __3002__idx__t1_index2;
id	c1	c2
1	54	37
2	54	38
3	54	39
4	54	40
5	54	41
6	54	42
7	54	43
8	54	44
9	54	45
update t1 set c2 = prevval for seq+prevval for seq where id >=1;
select * from t1;
id	c1	c2
1	54	54
2	54	54
3	54	54
4	54	54
5	54	54
6	54	54
7	54	54
8	54	54
9	54	54
select * from __3002__idx__t1_index1;
id	c1	c2
1	54	54
2	54	54
3	54	54
4	54	54
5	54	54
6	54	54
7	54	54
8	54	54
9	54	54
select * from __3002__idx__t1_index2;
id	c1	c2
1	54	54
2	54	54
3	54	54
4	54	54
5	54	54
6	54	54
7	54	54
8	54	54
9	54	54
create or replace sequence seq quick minvalue 3 maxvalue 4 cycle;
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	3	54
2	4	54
3	3	54
4	4	54
5	3	54
6	4	54
7	3	54
8	4	54
9	3	54
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	54
3	3	54
5	3	54
7	3	54
9	3	54
2	4	54
4	4	54
6	4	54
8	4	54
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	54
2	4	54
3	3	54
4	4	54
5	3	54
6	4	54
7	3	54
8	4	54
9	3	54
create or replace sequence seq quick minvalue 3 maxvalue 4 cycle;
update t1 set c2 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	3	3
4	4	4
5	3	3
6	4	4
7	3	3
8	4	4
9	3	3
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
3	3	3
5	3	3
7	3	3
9	3	3
2	4	4
4	4	4
6	4	4
8	4	4
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
3	3	3
5	3	3
7	3	3
9	3	3
2	4	4
4	4	4
6	4	4
8	4	4
create or replace sequence seq quick minvalue 3 maxvalue 5 cycle;
update t1 set c1 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	3
4	3	4
5	4	3
6	5	4
7	3	3
8	4	4
9	5	3
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	4
7	3	3
2	4	4
5	4	3
8	4	4
3	5	3
6	5	4
9	5	3
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
3	5	3
5	4	3
7	3	3
9	5	3
2	4	4
4	3	4
6	5	4
8	4	4
create or replace sequence seq quick minvalue 3 maxvalue 5 cycle;
update t1 set c2 = nextval for seq where id >=1;
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	5
4	3	3
5	4	4
6	5	5
7	3	3
8	4	4
9	5	5
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
create or replace sequence seq;
update t1 set c1 = nextval for seq where id >=10;
update t1 set c1 = 88 where id between 1 and prevval for seq;
ERROR HY000: YAO--1: THE PREVVAL expression of  sequence [seq] can't be used before using NEXTVAL
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	5
4	3	3
5	4	4
6	5	5
7	3	3
8	4	4
9	5	5
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
create or replace sequence seq;
update t1 set c2 = nextval for seq where id >=10;
update t1 set c2 = 88 where id between 1 and prevval for seq;
ERROR HY000: YAO--1: THE PREVVAL expression of  sequence [seq] can't be used before using NEXTVAL
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	5
4	3	3
5	4	4
6	5	5
7	3	3
8	4	4
9	5	5
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
create or replace sequence seq;
update t1 set c1 = nextval for seq where id >=10;
update t1 set c1 = nextval for seq where id between 1 and prevval for seq;
ERROR HY000: YAO--1: THE PREVVAL expression of  sequence [seq] can't be used before using NEXTVAL
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	5
4	3	3
5	4	4
6	5	5
7	3	3
8	4	4
9	5	5
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
create or replace sequence seq;
update t1 set c2 = nextval for seq where id >=10;
update t1 set c2 = nextval for seq where id between 1 and prevval for seq;
ERROR HY000: YAO--1: THE PREVVAL expression of  sequence [seq] can't be used before using NEXTVAL
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	5
4	3	3
5	4	4
6	5	5
7	3	3
8	4	4
9	5	5
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
create or replace sequence seq;
update t1 set c1 = nextval for seq where id =0;
select current_value from __all_sequence where sequence_name='seq';
current_value
1
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	5
4	3	3
5	4	4
6	5	5
7	3	3
8	4	4
9	5	5
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
create or replace sequence seq;
update t1 set c2 = nextval for seq where id =0;
select current_value from __all_sequence where sequence_name='seq';
current_value
1
select * from t1;
id	c1	c2
1	3	3
2	4	4
3	5	5
4	3	3
5	4	4
6	5	5
7	3	3
8	4	4
9	5	5
select * from __3002__idx__t1_index1;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
select * from __3002__idx__t1_index2;
id	c1	c2
1	3	3
4	3	3
7	3	3
2	4	4
5	4	4
8	4	4
3	5	5
6	5	5
9	5	5
