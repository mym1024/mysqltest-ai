drop table if exists t1,t2,t3,t4;
create table t1(id int primary key, money1 int) partition by range(id)(partition r0 values less than(5), partition r1 values less than (10), partition r2 values less than maxvalue);
insert into t1 values(1,100);
begin;
update t1 set money1=money1+100 where id=2;
begin;
insert into t1 values(2,100);
ERROR HY000: YAO-5049: Exclusive lock conflict 'int32:2' for key 'PRIMARY'
commit;
ROLLBACK;
select * from t1;
id	money1
1	100
begin;
insert into t1 values(3,100);
commit;
begin;
update t1 set money1=money1+100 where id=3;
begin;
delete from t1 where id=3;
ERROR HY000: YAO-5049: Exclusive lock conflict 'int32:3' for key 'PRIMARY'
commit;
ROLLBACK;
select * from t1;
id	money1
1	100
3	200
drop table t1;
