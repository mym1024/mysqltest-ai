drop table if exists test1;
drop partition function h;
ERROR HY000: YAO-5077: partition function 'h' doesn't exist
create hash partition function h(x)'x+1';
create table test1(c1 int,c2 varchar(20),c3 decimal(10,5),c4 int,primary key(c1)) partition by(hs,h,c1);
replace into test1 values(1,'a',1,1),(2,'b',2,2),(3,'c',3,3),(4,'d',4,4);
create index idx1 on test1(c1);
create index idx2 on test1(c2);
create index idx3 on test1(c3);
show index on test1;
index_name	status	index_type
__3001__idx__idx1	4	0
__3001__idx__idx2	4	0
__3001__idx__idx3	4	0
replace into test1 values(1,'a',1,1),(2,'b',2,2),(3,'c',3,3),(4,'d',4,4);
select * from test1;
c1	c2	c3	c4
1	a	1	1
2	b	2	2
3	c	3	3
4	d	4	4
delete from test1 where c1>1;
select * from test1;
c1	c2	c3	c4
1	a	1	1
replace into test1 values(1,'a',1,1),(2,'b',2,2),(3,'c',3,3),(4,'d',4,4);
select * from test1;
c1	c2	c3	c4
1	a	1	1
2	b	2	2
3	c	3	3
4	d	4	4
replace into test1 values(1,'a',1,1),(2,'b',2,2),(3,'c',3,3),(4,'d',4,4);
select * from test1;
c1	c2	c3	c4
1	a	1	1
2	b	2	2
3	c	3	3
4	d	4	4
delete from test1 where c1=1;
select * from test1;
c1	c2	c3	c4
2	b	2	2
3	c	3	3
4	d	4	4
replace into test1 values(1,'a',1,1),(2,'b',2,2),(3,'c',3,3),(4,'d',4,4);
select * from test1;
c1	c2	c3	c4
1	a	1	1
2	b	2	2
3	c	3	3
4	d	4	4
replace into test1 values(1,'a',1,1),(2,'b',2,2),(3,'c',3,3),(4,'d',4,4);
select * from test1;
c1	c2	c3	c4
1	a	1	1
2	b	2	2
3	c	3	3
4	d	4	4
delete from test1 where c1=1 or c1=2 or c1=3 or c1=4;
select * from test1;
c1	c2	c3	c4
replace into test1 values(1,'a',1,1),(2,'b',2,2),(3,'c',3,3),(4,'d',4,4);
select * from test1;
c1	c2	c3	c4
1	a	1	1
2	b	2	2
3	c	3	3
4	d	4	4
