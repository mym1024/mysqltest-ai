####################################必填######################################################
###1.测试功能点：主键更新的常规SQL功能测试
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：xxx
###6.编写/修改人：张二宝
###7.编写/修改日期：2019-11-04
###8.其他（选填）：
###
##
#
##############################################################################################

#####################################Do sql###################################################
create database rowkey_database;
using database rowkey_database;
sleep 5;


###2-1：混合数据类型，全列，纯数值，单行更新
#do sql
drop table if exists t;
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
update t set id1=9,id2=9,id3='1111-11-11 11:11:11',id4='000',id5=0,id6=0.0,id7=0.0,id8=0.0,id9=0, col1=0,col2=0,col3='1111-11-11 11:11:11',col4='000',col5=0,col6=0.0,col7=0.0,col8=0.0 where id1=0 and id2=1 and id3='1000-10-10 10:10:10' and id4='aaa' and id5=true and id6=1.1 and id7=2.2 and id8='3.3' and id9=1;
select * from t;
drop table if exists t;


###2-2：混合数据类型，全列，纯数值，多行更新，主键冲突
#do sql
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(1, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(2, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
--error 119
update t set id1=9,id2=9,id3='1111-11-11 11:11:11',id4='000',id5=0,id6=0.0,id7=0.0,id8=0.0,id9=0, col1=0,col2=0,col3='1111-11-11 11:11:11',col4='000',col5=0,col6=0.0,col7=0.0,col8=0.0 where id1>=0;
select * from t;
drop table if exists t;


###2-3：混合数据类型，全列，列名+数值，单行更新
#do sql
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
update t set id1=id1+9,id2=id2+9,id3='1111-11-11 11:11:11',id5=id5+10,id6=id6+10.0,id7=id7+10.0,id8=id8+10.0,id9=id9+10, col1=col1+0,col2=col2+0,col3='1111-11-11 11:11:11',col5=col5+10,col6=col6+10.0,col7=col7+10.0,col8=col8+10.0 where id1=0 and id2=1 and id3='1000-10-10 10:10:10' and id4='aaa' and id5=true and id6=1.1 and id7=2.2 and id8='3.3' and id9=1;
select * from t;
drop table if exists t;


###2-4：混合数据类型，全列，列名+数值，多行更新
#do sql
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(1, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(2, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
update t set id1=id1+9,id2=id2+9,id3='1111-11-11 11:11:11',id5=id5+10,id6=id6+10.0,id7=id7+10.0,id8=id8+10.0,id9=id9+10, col1=col1+0,col2=col2+0,col3='1111-11-11 11:11:11',col5=col5+10,col6=col6+10.0,col7=col7+10.0,col8=col8+10.0 where id1>=0;
select * from t;
drop table if exists t;


###2-5：混合数据类型，主键列，列名+数值，单行更新
#do sql
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
update t set id1=id1+9,id2=id2+9,id3='1111-11-11 11:11:11',id4='ccc',id5=id5+10,id6=id6+10.0,id7=id7+10.0,id8=id8+10.0,id9=id9+10 where id1=0 and id2=1 and id3='1000-10-10 10:10:10' and id4='aaa' and id5=true and id6=1.1 and id7=2.2 and id8='3.3' and id9=1;
select * from t;
drop table if exists t;


###2-6：混合数据类型，主键列，列名+数值，多行更新
#do sql
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(1, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(2, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
update t set id1=id1+9,id2=id2+9,id3='1111-11-11 11:11:11',id4='ccc',id5=id5+10,id6=id6+10.0,id7=id7+10.0,id8=id8+10.0,id9=id9+10 where id1>=0;
select * from t;
drop table if exists t;


###2-7：混合数据类型，部分主键列+部分非主键列，纯数值，单行更新
#do sql
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
update t set id1=9,id3='1111-11-11 11:11:11',id5=0,id7=0.0,id9=0,col2=0,col4='000',col6=0.0,col8=0.0 where id1=0 and id2=1 and id3='1000-10-10 10:10:10' and id4='aaa' and id5=true and id6=1.1 and id7=2.2 and id8='3.3' and id9=1;
select * from t;
drop table if exists t;


###2-8：混合数据类型，部分主键列+部分非主键列，纯数值，多行更新，主键冲突
#do sql
create table if not exists t(id1 int,id2 bigint, id3 datetime, id4 varchar(30), id5 bool, id6 decimal(10,1), id7 double, id8 float, id9 int, col1 int, col2 bigint, col3 datetime, col4 varchar(30), col5 bool, col6 decimal(10,1), col7 double, col8 float, primary key(id1,id2,id3,id4,id5,id6,id7,id8,id9));
replace into t values(0, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(1, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
replace into t values(2, 1, '1000-10-10 10:10:10', 'aaa', true, 1.1, 2.2, 3.3, 1, 2, 3, '1000-10-10 10:10:10', 'bbb', true, 1.1, 2.2, 3.3);
--error 119
update t set id1=9,id3='1111-11-11 11:11:11',id5=0,id7=0.0,id9=0,col2=0,col4='000',col6=0.0,col8=0.0 where id1>=0;
select * from t;
drop table if exists t;


###2-9：纯数值，单行更新，主键冲突
#do sql
create table if not exists t(id1 int primary key, col1 int);
replace into t values(0, 0);
replace into t values(1, 0);
--error 119
update t set id1=1,col1=1 where id1=0;
select * from t;
drop table if exists t;


###2-10：列名，多行更新，主键冲突
#do sql
create table if not exists t(id1 int primary key, col1 int);
replace into t values(0, 0);
replace into t values(1, 0);
replace into t values(2, 0);
--error 119
update t set id1=col1 where id1>=0;
select * from t;
drop table if exists t;


###2-11：主键重复设置异常，列名+数值，单行更新
#do sql
create table if not exists t(id1 int primary key, col1 int);
replace into t values(0, 0);
#--error 145
update t set id1=id1+1, id1=2, col1=1 where id1=0;
select * from t;
drop table t;


###2-12：主键重复设置异常，列名+数值，多行更新
#do sql
create table if not exists t(id1 int primary key, col1 int);
replace into t values(0, 0);
replace into t values(1, 0);
replace into t values(2, 0);
--error 119
update t set id1=id1+10, id1=10 where id1>=0;
select * from t;
drop table if exists t;


###2-13：主键值实际没有改变，多行更新
#do sql
create table if not exists t(id1 int, id2 int, col1 int, col2 int, primary key(id1,id2));
replace into t values(0, 0, 0, 0);
replace into t values(1, 0, 0, 0);
replace into t values(2, 0, 0, 0);
replace into t values(3, 0, 0, 0);
update t set id1=id1+0, col1=1 where id1>=0;
drop table if exists t;


###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
