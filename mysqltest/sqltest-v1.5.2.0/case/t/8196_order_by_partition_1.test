##############################################################################################
###1.测试功能点：指定分区规则表中,order by 的使用
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：xxx
###6.编写/修改人：zhuyinying
###7.编写/修改日期：2020-01-13
###8.其他（选填）：case格式规范化修改
###
##
#
##############################################################################################

#####################################Do sql###################################################
--disable_warnings
drop table if exists t1,t2,t3;
--enable_warnings

create enum partition function e1(x,y)'[(6067169d,4)],[(606716d1,5)],[(606717c1,1)],[(60671515,6)],[(60671569,7)],[(dd,3)]';
create table t1(
id int,
idservice int,
clee char(20) not null,
flag char(1),
primary key(clee,idservice)
) partition by(e1t,e1,clee,idservice);

--real_sleep 5
insert into t1 values (2,4,'6067169d','Y');
insert into t1 values (2,5,'606716d1','Y');
insert into t1 values (2,1,'606717c1','Y');
insert into t1 values (2,6,'60671515','Y');
insert into t1 values (2,7,'60671569','Y');
insert into t1 values (2,3,'dd','Y');

create hash partition function h1(x)'x%3+5';
create table t2(
id int,
description varchar(40) not null,
idform varchar(40),
ordre int,
image varchar(60),
primary key(id)
) partition by(h1t,h1,id);
--real_sleep 5

insert into t2 values (1,'Emettre un appel d''offres','en_construction.html',10,'emettre.gif');
insert into t2 values (2,'Emettre des soumissions','en_construction.html',20,'emettre.gif');
insert into t2 values (7,'Liste des t2','t2_liste__form.phtml',51060,'link.gif');
insert into t2 values (8,'Consulter les soumissions','consulter_soumissions.phtml',200,'link.gif');
insert into t2 values (9,'Ajouter un type de materiel','typeMateriel.phtml',51000,'link.gif');
insert into t2 values (10,'Lister/modifier un type de materiel','typeMateriel_liste_form.phtml',51010,'link.gif');
insert into t2 values (3,'Creer une fiche de client','clients_ajoute_form.phtml',40000,'link.gif');
insert into t2 values (4,'Modifier des clients','en_construction.html',40010,'link.gif');
insert into t2 values (5,'Effacer des clients','en_construction.html',40020,'link.gif');
insert into t2 values (6,'Ajouter un service','t2_ajoute_form.phtml',51050,'link.gif');

select t1.id,t1.idservice,t2.ordre,t2.description from t1,t2 where t1.id=2 and t1.idservice = t2.id order by t2.ordre;

drop table t1,t2;
drop partition function h1,e1;
	

create table t1(pk int primary key,name varchar(255) not null,number varchar(255) not null) partition by list(pk) (partition s1 values in(1,3),partition s2 values in(2,4));
--real_sleep 5
insert into t1 values (1,'Gamma','123'),(2,'Gamma Ext','123a'),(3,'Alpha','001'),(4,'Beta','200c');
--real_sleep 3
select distinct t1.name as BName,t1.number as BNumber from t1 order by t1.name asc;
drop table t1;


create table t1(id int primary key ,col1 int not null,col2 int not null) partition by range(id) (partition d1 values less than(3),partition d2 values less than (5),partition d3 values less than (10),partition d4 values less than maxvalue);
--real_sleep 5
insert into t1 values(1,2,2),(2,2,1),(3,1,2),(4,1,1),(5,1,4),(6,2,3),(7,3,1),(8,2,4);
--real_sleep 3
select * from t1 order by col1,col2;
select col1 from t1 order by id;

select col1 as id from t1 order by id;
drop table t1;

create table t1(pk int primary key,a int not null,b int,c varchar(10)) partition by range(pk) (partition r1 values less than(5),partition r2 values less than (10),partition r3 values less than (15),partition r4 values less than maxvalue);
--real_sleep 5
insert into t1 values (1,1,null,null),(2,1,null,'b'),(3,1,1,null),(4,1,1,'b'),(5,1,1,'b'),(6,2,1,'b'),(7,2,1,'b'),(8,2,2,'a'),(9,2,2,'b'),(10,2,3,'c'),(11,1,3,'b');
--real_sleep 5
select * from t1 where (a=1 and b is null and c='b') or (a>2) order by a desc;
select * from t1 where a>=1 and a<3 order by a desc;
select * from t1 where a=1 order by a desc,b desc;
select * from t1 where a=1 and b is null order by a desc,b desc;
select * from t1 where a=1 order by b desc;
select * from t1 order by a,b,c;
select * from t1 order by a desc,b desc,c desc;
select * from t1 where (a=1 and b =1 and c='b') or (a>2) order by a desc;
select * from t1 where a between 1 and 3 and b<=1 order by a desc,b desc;
select * from t1 where a between 0 and 1 order by a desc,b desc;
drop table t1;
###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
