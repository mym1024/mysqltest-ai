#######################################################
###1.测试功能点：在指定分区规则中，多session下加锁读读取事务;
#######################################################

drop table if exists c;

create table c(c1 int primary key, c2 varchar(8)) partition by range(c1)(partition r0 values less than(5),partition r1 values less than(10),partition r2 values less than maxvalue);
connect(conn1,$OBMYSQL_MS0,admin,admin,test,$OBMYSQL_PORT);
connect(conn2,$OBMYSQL_MS0,admin,admin,test,$OBMYSQL_PORT);
connection conn1;
begin;
insert into c values(1,1);
update c set c2='2' where c1=1;
connection conn2;
begin;
--error 5049
select * from c where c1=1 for update;
select * from c where c1=2 for update;
commit;
connection conn1;
commit;