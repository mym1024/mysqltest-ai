##############################################################################################
###1.测试功能点:hash中以int类型为主键列进行不同条件查询
##                  
#                                     
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：
###4.问题号：
###5.预计运行时间：xxx
###6.编写/修改人： zhuyinying
###7.编写/修改日期：2020-1-14
###8.其他（选填）：case格式规范化修改
###
##
#
##############################################################################################

#####################################Do sql###################################################

--disable_warnings
drop table if exists t1,t2,t3;
--enable_warnings

###2-1：single field

--error 5077
drop partition function h;
create hash partition function h(x) 'x+1';
create table t1(a int primary key,b int)partition by(hs,h,a);
--real_sleep 5

select * from t1;
select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 1;
select * from t1 where a < 1;

let $i=10;
disable_query_log;
while($i > -10)
{
eval insert into t1(a) values($i);
dec $i;
}
enable_query_log;
select * from t1;
select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 1;
select * from t1 where a < 1;

drop table t1;

###2-2:more fields

create table t1(a int primary key,b int,c int)partition by range(a)(partition r0 values less than(-10),partition r1 values less than(10),partition r2 values less than maxvalue);

--real_sleep 5

select * from t1;
select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 1;
select * from t1 where a < 1;
let $i=10;
disable_query_log;
while($i > -10)
{
eval insert into t1 values($i,$i,$i);
dec $i;
}
enable_query_log;
select * from t1;
select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 2;
select * from t1 where a < 3;

drop table t1;

###2-3:pk:two fields
create table t1(a int,b int,c int,primary key(a,b))partition by range(a)(partition r0 values less than(-50),partition r1 values less than(10),partition r2 values less than(15),partition r3 values less than maxvalue);
--real_sleep 5
select * from t1;
select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 1;
select * from t1 where a < 1;

select * from t1 where a > -1 and b > -1;
select * from t1 where a = -1 and b = -1;
select * from t1 where a < -1 and b < -1;
select * from t1 where a > 0 and b > 0;
select * from t1 where a = 0 and b = 0;
select * from t1 where a < 0 and b < 0;
select * from t1 where a > 1 and b > 1;
select * from t1 where a = 1 and b = 1;
select * from t1 where a < 1 and b < 1;

select * from t1 where a > -1 and b < -1;
select * from t1 where a = -1 and b != -1;
select * from t1 where a < -1 and b > -1;
select * from t1 where a > 0 and b < 0;
select * from t1 where a = 0 and b != 0;
select * from t1 where a < 0 and b > 0;
select * from t1 where a > 1 and b < 1;
select * from t1 where a = 1 and b != 1;
select * from t1 where a < 1 and b > 1;

let $i=10;
disable_query_log;
while($i > -10)
{
eval insert into t1 values($i,$i,$i);
dec $i;
}
enable_query_log;

select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 1;
select * from t1 where a < 1;

select * from t1 where a > -1 and b > -1;
select * from t1 where a = -1 and b = -1;
select * from t1 where a < -1 and b < -1;
select * from t1 where a > 0 and b > 0;
select * from t1 where a = 0 and b = 0;
select * from t1 where a < 0 and b < 0;
select * from t1 where a > 1 and b > 1;
select * from t1 where a = 1 and b = 1;
select * from t1 where a < 1 and b < 1;

select * from t1 where a > -1 and b < -1;
select * from t1 where a = -1 and b != -1;
select * from t1 where a < -1 and b > -1;
select * from t1 where a > 0 and b < 0;
select * from t1 where a = 0 and b != 0;
select * from t1 where a < 0 and b > 0;
select * from t1 where a > 1 and b < 1;
select * from t1 where a = 1 and b != 1;
select * from t1 where a < 1 and b > 1;

select * from t1;
drop table t1;

###pk as all fields
create table t1(a int,b int,c int,primary key(a,b,c),d int)partition by range(a)(partition r0 values less than(-10),partition r1 values less than(10),partition r2 values less than maxvalue);
--real_sleep 5
select * from t1;
select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 1;
select * from t1 where a < 1;

select * from t1 where a > -1 and b > -1 and c > -1;
select * from t1 where a = -1 and b = -1 and c = -1;
select * from t1 where a < -1 and b < -1 and c < -1;
select * from t1 where a > 0 and b > 0 and c > 0;
select * from t1 where a = 0 and b = 0 and c = 0;
select * from t1 where a < 0 and b < 0 and c < 0;
select * from t1 where a > 1 and b > 1 and c > 1;
select * from t1 where a = 1 and b = 1 and c = 1;
select * from t1 where a < 1 and b < 1 and c < 1;

select * from t1 where a > -1 and b < -1 and c > -1;
select * from t1 where a = -1 and b != -1 and c = -1;
select * from t1 where a < -1 and b > -1 and c < -1;
select * from t1 where a > 0 and b < 0 and c > 0;
select * from t1 where a = 0 and b != 0 and c = 0;
select * from t1 where a < 0 and b > 0 and c < 0;
select * from t1 where a > 1 and b < 1 and c > 1;
select * from t1 where a = 1 and b != 1 and c = 1;
select * from t1 where a < 1 and b > 1 and c < 1;

let $i=10;
disable_query_log;
while($i > -10)
{
eval insert into t1(a,b,c) values($i,$i,$i);
dec $i;
}
enable_query_log;
select * from t1;

select * from t1 where a > -1;
select * from t1 where a = -1;
select * from t1 where a < -1;
select * from t1 where a > 0;
select * from t1 where a = 0;
select * from t1 where a < 0;
select * from t1 where a > 1;
select * from t1 where a = 1;
select * from t1 where a < 1;

select * from t1 where a > -1 and b > -1 and c > -1;
select * from t1 where a = -1 and b = -1 and c = -1;
select * from t1 where a < -1 and b < -1 and c < -1;
select * from t1 where a > 0 and b > 0 and c > 0;
select * from t1 where a = 0 and b = 0 and c = 0;
select * from t1 where a < 0 and b < 0 and c < 0;
select * from t1 where a > 1 and b > 1 and c > 1;
select * from t1 where a = 1 and b = 1 and c = 1;
select * from t1 where a < 1 and b < 1 and c < 1;

select * from t1 where a > -1 and b < -1 and c > -1;
select * from t1 where a = -1 and b != -1 and c = -1;
select * from t1 where a < -1 and b > -1 and c < -1;
select * from t1 where a > 0 and b < 0 and c > 0;
select * from t1 where a = 0 and b != 0 and c = 0;
select * from t1 where a < 0 and b > 0 and c < 0;
select * from t1 where a > 1 and b < 1 and c > 1;
select * from t1 where a = 1 and b != 1 and c = 1;
select * from t1 where a < 1 and b > 1 and c < 1;

drop table t1;



###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
