##############################################################################################
###1.测试功能点：在list分区规则下，批量插入数据
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：xxx
###6.编写/修改人：zhuyinying
###7.编写/修改日期：2019-12-23
###8.其他（选填）：case格式规范化修改
###
##
#
##############################################################################################

#####################################Do sql###################################################

--disable_warnings
drop table if exists list1,list2;
--enable_warnings

create table list1(c1 int primary key,c2 varchar(30),c3 datetime,c4 float,c5 decimal(5,4),c6 bool) partition by list(c1) (partition q0 values in(1,2,3,4,5,6,7,8,9,11));
create table list2(c1 int primary key,c2 varchar(30),c3 datetime,c4 float,c5 decimal(5,4),c6 bool) partition by list(c1) (partition q0 values in(1,2,3,4,5,6,7,8,9,11));
show table rules;
--real_sleep 3
insert into list2 values(1,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(2,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(3,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(4,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(5,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(6,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(7,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(8,'jiomn','2019-06-07 17:25:28',1.256,2.568,0),(9,'jiomn','2019-06-07 17:25:28',1.256,2.568,0);

###2-1:分别正常与异常插入数据
--error 5702
insert into list2 (c1,c2,c5) values(10.25,11.28,5.26);
insert into list1(c1,c5) select c1,c5 from list2 where c1>10;
select * from list1;
select * from list2;

--error 2
insert into list1 (c1,c2,c3) values(11,14,5.2634);
select * from list1;
#--error 119
insert into list2(c1,c2,c5) select c1,c2,c3 from list1 where c1=11;
select * from list2;
--error 5702
insert into list2 (c1,c2,c6) values(15.345,16.35,5.2634);
select * from list2;
insert into list1(c1,c5) select c1,c6 from list2 where c1>15;
select * from list1;
insert into list1(c1,c2) select c6,c6 from list2 where c1>16;
select * from list1;
show partition groups;

--disable_warnings
drop table if exists t1,t2;
--enable_warnings
create table t1 (c1 int primary key,c2 int,c3 decimal(5,4),c4 bool,c5 varchar(30));
create table t2 (c1 float,c2 double,c3 bool,c4 int,c5 decimal(3,2),c6 datetime,primary key(c1,c2));
--real_sleep 3
insert into t2(c1,c2,c3) values(1.56,2.87,2);
select * from t2;
insert into t1 (c1,c2) select c1,c2 from t2;
select * from t1;

insert into t2(c1,c2) values(5.36,6.46);
select * from t2;
insert into t1(c1,c3) select c1,c2 from t2 where c1>2;
select * from t1;

insert into t1(c1,c3) select c2,c1 from t2 where c1>2;
select * from t1;

insert into t2(c1,c2,c5) values(8.65,9.123,4.25);
insert into t1(c1,c2) select c1,c5 from t2 where c1>6;
select * from t1;
select * from t2;
insert into t1(c1,c3) select c2,c5 from t2 where c1>6;
select * from t1;

###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
