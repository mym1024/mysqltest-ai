##############################################################################################
###1.测试功能点：指定分区规则，通过prepare预执行replace
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：xxx
###6.编写/修改人：zhuyinying
###7.编写/修改日期：2020-01-02
###8.其他（选填）：case格式规范化修改
###
##
#
##############################################################################################

#####################################Do sql###################################################
--disable_warnings
drop table if exists t1;
--enable_warnings

###2-1：指定分区规则，通过prepare预执行replace
create table t1(i1 int ,v2 varchar(20),f3 float,d4 datetime,primary key(i1)) partition by range(i1) (partition r0 values less than(5),partition r1 values less than (10),partition r2 values less than (15),partition r3 values less than maxvalue);
insert into t1(i1,v2,f3,d4) values(1,'a',1.3,'2013-05-30 01:00:00'),(2,'b',2.3,'2013-05-30 02:00:00'),(3,'c',3.3,'2013-05-30 03:00:00'),(4,'d',4.3,'2013-05-30 04:00:00');
prepare stmt from replace into t1 values(?,?,?,?);
set @a=1;
set @b='a1';
set @c=1.4;
set @d='2013-05-30 01:10:00';
execute stmt using @a,@b,@c,@d;
select * from t1;

set @a=5;
set @b='e';
set @c=5.3;
set @d='2013-05-30 05:00:00';
execute stmt using @a,@b,@c,@d;
--real_sleep 3
select * from t1;
drop table t1;


create table t1(i1 int ,v2 varchar(20),f3 float,d4 datetime,primary key(i1)) partition by list(i1) (partition q0 values in(1,3),partition q1 values in(2,4,5));
insert into t1(i1,v2,f3,d4) values(1,'a',1.3,'2013-05-30 01:00:00'),(2,'b',2.3,'2013-05-30 02:00:00'),(3,'c',3.3,'2013-05-30 03:00:00'),(4,'d',4.3,'2013-05-30 04:00:00');
prepare stmt from replace into t1(i1,v2,f3,d4) values(1,?,?,?);
set @b='a1';
set @c=1.4;
set @d='2013-05-30 01:10:00';
execute stmt using @b,@c,@d;
select * from t1;
drop table t1;

create table t1(i1 int ,v2 varchar(20),f3 float,d4 datetime,primary key(i1)) partition by range(i1) (partition r0 values less than(5),partition r1 values less than (10),partition r2 values less than maxvalue);
insert into t1(i1,v2,f3,d4) values(1,'a',1.3,'2013-05-30 01:00:00'),(2,'b',2.3,'2013-05-30 02:00:00'),(3,'c',3.3,'2013-05-30 03:00:00'),(4,'d',4.3,'2013-05-30 04:00:00');
prepare stmt from replace into t1(i1,v2,f3,d4) values(?,?,?,?),(?,?,?,?);
set @a=2;
set @b='b1';
set @c=2.4;
set @d='2013-05-30 02:10:00';

set @e=5;
set @f='e';
set @g=5.3;
set @h='2013-05-30 05:00:00';
execute stmt using @a,@b,@c,@d,@e,@f,@g,@h;
--real_sleep 3
select * from t1;

set @a=5;
set @b='e1';
set @c=5.4;
set @d='2013-05-30 05:10:00';

set @a=5;
set @b='e2';
set @c=5.5;
set @d='2013-05-30 05:20:00';
--real_sleep 3
execute stmt using @a,@b,@c,@d,@e,@f,@g,@h;
drop table t1;

create table t1(i1 int ,v2 varchar(20),f3 float,d4 datetime,primary key(i1)) partition by range(i1) (partition r0 values less than(5),partition r1 values less than (10),partition r2 values less than (15),partition r3 values less than maxvalue);
insert into t1(i1,v2,f3,d4) values(1,'a',1.3,'2013-05-30 01:00:00'),(2,'b',2.3,'2013-05-30 02:00:00'),(3,'c',3.3,'2013-05-30 03:00:00'),(4,'d',4.3,'2013-05-30 04:00:00');
prepare stmt from replace into t1(i1,v2,f3,d4) values(1,?,?,?),(5,?,?,?);
set @b='b1';
set @c=2.4;
set @d='2013-05-30 02:10:00';
set @f='e';
set @g=5.3;
set @h='2013-05-30 05:00:00';
execute stmt using @b,@c,@d,@f,@g,@h;
--real_sleep 3
select * from t1;
drop table t1;
###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
