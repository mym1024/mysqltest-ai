#######################################################
###1.���Թ��ܵ㣺��range����������У���ͬ��ͬsession���У���ȡδ�ύ����;
#######################################################

drop table if exists c;
create table c(c1 int primary key, c2 varchar(8)) partition by range(c1) (partition r0 values less than(5000), partition r1 values less than(100000), partition r2 values less than maxvalue);

connect(conn1,$OBMYSQL_MS0,admin,admin,test,$OBMYSQL_PORT);
connect(conn2,$OBMYSQL_MS0,admin,admin,test,$OBMYSQL_PORT);

###2-1:ͬһsession�ж�ȡδ�ύ����
connection conn1;
set autocommit=1;
--real_sleep 5
begin;
insert into c values(1,1);
insert into c values(10,1);
insert into c values(100,1);
insert into c values(1000,1);
insert into c values(1500,1);
insert into c values(3000,1);
insert into c values(10000,1);
insert into c values(50000,1);
insert into c values(100000,1);
insert into c values(1000000,1);
select * from c where c1=1;
select * from c where c1=10;
select * from c where c1=100;
select * from c where c1=1000;
select * from c where c1=1500;
select * from c where c1=3000;
select * from c where c1=10000;
select * from c where c1=50000;
select * from c where c1=100000;
select * from c where c1=1000000;
select * from c where c2=1;
select * from c;

###2-1:��ͬsession�ж�ȡδ�ύ����
connection conn2;
set autocommit=1;
begin;
select * from c where c1=1;
select * from c where c1=10;
select * from c where c1=100;
select * from c where c1=1000;
select * from c where c1=1500;
select * from c where c1=3000;
select * from c where c1=10000;
select * from c where c1=50000;
select * from c where c1=100000;
select * from c where c1=1000000;
select * from c where c2=1;
select * from c;
commit;
connection conn1;
commit;



