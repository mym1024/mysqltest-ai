--source merge.sql
set names utf8mb4;
##############################################################################################
###1.测试功能点：测试HotRelease-V1.3.2.2-202409分支适配海港北仑bug
#                         
#                 
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：
###4.问题号：
###5.预计运行时间：15s
###6.编写/修改人：yangf
###7.编写/修改日期：
###8.其他（选填）：新增
###
##
#
##############################################################################################

#####################################Do sql###################################################

##2、blob、clob类型支持。
use test;
create table test1(c1 blob,c2 clob);
create table test2(c1 int primary key,c2 blob,c3 clob);
desc test1;
desc test2;
show create table test1;
show create table test2;

##3、表结构存储属性设置
create table test3(c1 int primary key,c2 varchar(10)
)SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDBSTATDATA  ENABLE ROW MOVEMENT ;
show create table test3;

##4、表注释、列注释语法
create table test4(c1 int,c2 varchar(10));
COMMENT ON COLUMN test.test4.c1 IS 'c1列注释';
COMMENT ON COLUMN test.test4.c2 IS 'c1列注释';
COMMENT ON TABLE test.test4  IS 'test3表注释';
show create table test4;

##5、字段默认值含to_char()、sysdate函数;
##13、NUMBER(*,0)类型支持
create table test5(
c1 NUMBER(5,0),
c2 CHAR(19) DEFAULT TO_CHAR(SYSDATE,'YYYY-MM-DD HH24:MI:SS'),
c3 NUMBER(*,0)
);
desc test5;
show create table test5;
create table test5_1(
c1 NUMBER(5,0),
c2 CHAR(19) DEFAULT '2022-1-1',
c3 NUMBER(*,0)
);
desc test5_1;
show create table test5_1;

##6、索引含存储信息
##8、创建索引时，索引名不能含库名
create table test6(c1 int,c2 varchar(10));
CREATE UNIQUE INDEX test.test6_index1 ON test.test6 (c1) 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDB ;
show create index on test.test6;
show create table test.test6;


##7、列名关键字LIMIT、INTERVAL、CURRENT_TIME、GROUPS、CONDITION、YEAR_MONTH、CHANGE
##20、数据类型BINARY_FLOAT
create table test7(
LIMIT int,
INTERVAL int,
CURRENT_TIME varchar(10),
GROUPS varchar(10),
CONDITION varchar(10),
YEAR_MONTH varchar(10),
CHANGE BINARY_FLOAT
);
show create table test7;

##9、创建索引时，引用列含运算符
create table test9(c1 int,c2 varchar(10));
--error 5001
CREATE INDEX test.test9_index on test.test9(c1||' '||c2);
set sql_mode='PIPES_AS_CONCAT';
CREATE INDEX test.test9_index on test.test9(c1||' '||c2);
show create index on test.test9;
show create table test.test9;

##10、修改主键约束含存储信息
create table test10(c1 number,c2 varchar(10),c3 int);
ALTER TABLE test.test10 ADD CONSTRAINT PK_test10 PRIMARY KEY (c1, c2)
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDB  ENABLE;
show create table test.test10;

##11、创建序列时不支持指定库名；MAXVALUE超出长度范围；不支持序列属性 NOCYCLE、NOORDER、NOCACHE
CREATE SEQUENCE  test.seqtest_11  MINVALUE 1 MAXVALUE 999999999999999999999999 INCREMENT BY 1 START WITH 1202441 CACHE 20 NOORDER  NOCYCLE ;
CREATE SEQUENCE  test.seqtest_111  MINVALUE 1 MAXVALUE 999 INCREMENT BY 1 START WITH 157 NOCACHE  NOORDER  CYCLE ;
select sequence_name,current_value from __all_sequence where sequence_name like 'seqtest_%';
##12、创建外键时含DISABLE属性
CREATE TABLE test.BIL_CUSTOMER_TARIFF
   (    COMPANY_ID VARCHAR2(5),
        ITEM_CODE CHAR(2),
        CTN_SIZE CHAR(2),
        RATE NUMBER(9,2)
   );
--real_sleep 1
ALTER TABLE test.BIL_CUSTOMER_TARIFF ADD PRIMARY KEY (COMPANY_ID, ITEM_CODE, CTN_SIZE);
CREATE TABLE test.BIL_STANDARD_ITEM
   (    ITEM_CODE CHAR(2),
        ITEM_DESCRIPTION VARCHAR2(30),
        ADDUP_FLAG CHAR(1)
   );
--real_sleep 1
ALTER TABLE test.BIL_STANDARD_ITEM ADD PRIMARY KEY (ITEM_CODE);
ALTER TABLE test.BIL_CUSTOMER_TARIFF ADD FOREIGN KEY (ITEM_CODE) REFERENCES test.BIL_STANDARD_ITEM (ITEM_CODE) DISABLE;
--real_sleep 1
show create table test.BIL_CUSTOMER_TARIFF;
show create table test.BIL_STANDARD_ITEM;
   
##14、设置非空约束含ENABLE
##23、索引总列超过16,默认100。一个表默认最多64个（普通索引+唯一索引）
##24、创建索引含desc排序
##28、创建索引时，卡住不动,同23问题。
##29、修改普通索引时报错YAO-2: Invalid argument

 CREATE TABLE test.STA_VESSEL_DETAIL 
   (	VESSEL_REFERENCE VARCHAR2(12), 
	VESSEL_IE VARCHAR2(1), 
	SERVICE_CODE VARCHAR2(6), 
	LOADDIS_PORT_CODE VARCHAR2(5), 
	CTN_SIZE VARCHAR2(2), 
	CTN_TYPE VARCHAR2(2), 
	CTN_CATEGORY VARCHAR2(1), 
	CTN_STATUS VARCHAR2(1), 
	CTN_OPERATOR_CODE VARCHAR2(3), 
	CLASS VARCHAR2(4), 
	TRADE_NW VARCHAR2(1), 
	RF_FLAG VARCHAR2(1), 
	OD_FLAG VARCHAR2(1), 
	DM_FLAG VARCHAR2(1), 
	STA_CTN_NUMBER NUMBER(5,0), 
	STA_CTN_WEIGHT NUMBER, 
	VOYAGE VARCHAR2(20), 
	STA_CTN_TEU NUMBER(7,2), 
	LINER_OPERATOR_CODE VARCHAR2(3), 
	CARGO_WEIGHT NUMBER, 
	NEXT_PORT VARCHAR2(5), 
	STA_DATE VARCHAR2(10), 
	PLAN_ACTUAL VARCHAR2(1), 
	FORWARDER_CODE VARCHAR2(5), 
	HIS_STA_DATE VARCHAR2(10), 
	HIS_STA_CTN_TEU NUMBER(7,2), 
	HIS_CTN_WEIGHT NUMBER, 
	HIS_CARGO_WEIGHT NUMBER, 
	STA_ACTUAL_DATE VARCHAR2(10), 
	HIS_STA_ACTUAL_CTN_TEU NUMBER, 
	HIS_CTN_ACTUAL_WEIGHT NUMBER, 
	HIS_ACTUAL_CARGO_WEIGHT NUMBER, 
	HIS_STA_ACTUAL_DATE VARCHAR2(10), 
	RETURN_FLAG VARCHAR2(1) DEFAULT 'N', 
	CARGO_PACKAGES NUMBER, 
	DATA_FROM VARCHAR2(10), 
	BIL_SIZE VARCHAR2(2), 
	BIL_TYPE VARCHAR2(2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDBSTATDATA  ENABLE ROW MOVEMENT ;

   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.VESSEL_REFERENCE IS 'Vessel Reference';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.VESSEL_IE IS '航向(I/E)';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.SERVICE_CODE IS '航线代码';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.LOADDIS_PORT_CODE IS '进口：装货港，出口：卸货港';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CTN_SIZE IS '箱尺寸';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CTN_TYPE IS '箱类型';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CTN_CATEGORY IS '箱类别(I/E/S/R/M/T/Z)';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CTN_STATUS IS '箱状态(E/F)';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CTN_OPERATOR_CODE IS '必须从4位转向3位';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CLASS IS '危险品等级';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.TRADE_NW IS '内外贸(N/W)';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.RF_FLAG IS '稳控箱标记';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.OD_FLAG IS '超限标记';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.DM_FLAG IS '残损标记(Y)';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.STA_CTN_NUMBER IS '分类箱数量';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.STA_CTN_WEIGHT IS '分类箱重量';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.VOYAGE IS '出口航次';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.STA_CTN_TEU IS '分类箱TEU数量';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.LINER_OPERATOR_CODE IS '航线经营人';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CARGO_WEIGHT IS '货重';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.NEXT_PORT IS '下一港口代码';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.STA_DATE IS '统计指定日期 P：计划';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.PLAN_ACTUAL IS 'P：计划；A：实际';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.FORWARDER_CODE IS '货代';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.HIS_STA_DATE IS '历史统计日期';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.HIS_STA_CTN_TEU IS '历史统计TEU';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.HIS_CTN_WEIGHT IS '历史统计重量';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.HIS_CARGO_WEIGHT IS '历史统计货重';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.STA_ACTUAL_DATE IS '实际统计日期 A：实际';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.RETURN_FLAG IS '退运标记(Y/N)';
   COMMENT ON COLUMN test.STA_VESSEL_DETAIL.CARGO_PACKAGES IS '件数';
   COMMENT ON TABLE test.STA_VESSEL_DETAIL  IS '进/出口单船小结--明细';
ALTER TABLE test.STA_VESSEL_DETAIL ADD PRIMARY KEY (VESSEL_REFERENCE, VESSEL_IE, LOADDIS_PORT_CODE, CTN_SIZE, CTN_TYPE, CTN_CATEGORY, CTN_STATUS, CTN_OPERATOR_CODE, CLASS, TRADE_NW, DM_FLAG, RF_FLAG, OD_FLAG, PLAN_ACTUAL, FORWARDER_CODE, RETURN_FLAG)
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDBSTATDATA  ENABLE;
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (RETURN_FLAG NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (FORWARDER_CODE NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (PLAN_ACTUAL NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (DM_FLAG NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (OD_FLAG NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (RF_FLAG NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (TRADE_NW NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (CLASS NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (CTN_OPERATOR_CODE NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (CTN_STATUS NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (CTN_CATEGORY NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (CTN_TYPE NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (CTN_SIZE NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (LOADDIS_PORT_CODE NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (VESSEL_IE NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL MODIFY (VESSEL_REFERENCE NOT NULL ENABLE);
  ALTER TABLE test.STA_VESSEL_DETAIL ADD CHECK (HIS_STA_DATE IS NOT NULL) ENABLE;

  CREATE UNIQUE INDEX test.SYS_C0014298 ON test.STA_VESSEL_DETAIL (VESSEL_REFERENCE, VESSEL_IE, LOADDIS_PORT_CODE, CTN_SIZE, CTN_TYPE, CTN_CATEGORY, CTN_STATUS, CTN_OPERATOR_CODE, CLASS, TRADE_NW, DM_FLAG, RF_FLAG, OD_FLAG, PLAN_ACTUAL, FORWARDER_CODE, RETURN_FLAG) 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDBSTATDATA ;

  CREATE INDEX test.I_STA_VESSEL_DETAIL_3 ON test.STA_VESSEL_DETAIL (VESSEL_REFERENCE, PLAN_ACTUAL) 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDBVSPDATA ;
  
  CREATE INDEX test.I_STA_VESSEL_DETAIL_4 ON test.STA_VESSEL_DETAIL (STA_ACTUAL_DATE DESC)
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS NOLOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE ACTHOSTDBDATA ;
show create table test.STA_VESSEL_DETAIL;

##16、创建视图不支持查询条件含日期函数计算
CREATE TABLE test.test16
   (     VESSEL_VOYAGE VARCHAR2(20),
        VESSEL_REFERENCE VARCHAR2(50),
        INPUT_DATE CHAR(10),
        INPUT_USERID VARCHAR2(8)
   );
insert into test.test16 values('0001W','DEVELOP/0001W','2008-10-09','0001W');
insert into test.test16 values('0002W','DEVELOP/0002W','2009-10-09','0002W');
insert into test.test16 values('0003W','DEVELOP/0003W','2010-10-09','0003W');
insert into test.test16 values('0004W','DEVELOP/0004W','2011-10-09','0004W');
insert into test.test16 values('0005W','DEVELOP/0005W','2012-10-09','0005W');
select VESSEL_REFERENCE,VESSEL_VOYAGE,INPUT_DATE,sysdate - to_date(input_date, 'YYYY-MM-DD') from test.test16;
CREATE OR REPLACE FORCE VIEW test.test16_view (VESSEL_REFERENCE, VESSEL_VOYAGE) AS
select c.vessel_reference vessel_reference,  c.vessel_voyage vessel_voyage from test16 c 
where (sysdate - to_date(c.input_date, 'YYYY-MM-DD')) >=5000 ;
select * from test.test16_view;

##17、授权相关
CREATE USER test IDENTIFIED BY '123456test@';
GRANT DEBUG ON test.STA_VESSEL_DETAIL TO test;
GRANT QUERY REWRITE ON test.STA_VESSEL_DETAIL TO test;
GRANT ON COMMIT REFRESH ON test.STA_VESSEL_DETAIL TO test;
GRANT REFERENCES ON test.STA_VESSEL_DETAIL TO test;
GRANT INDEX ON test.STA_VESSEL_DETAIL TO test;

##21、不支持创建全局临时表
CREATE GLOBAL TEMPORARY TABLE test.test_temp
   (    TEMPCTN_NO VARCHAR2(12),
        TEMPCARRY_CHE_ID VARCHAR2(12),
        TEMPCARRY_CHE_OPERATORID VARCHAR2(12),
        TEMPWORK_DATE VARCHAR2(10),
        TEMPWORK_SHIFT VARCHAR2(1),
        TEMPSTART_TIME VARCHAR2(19),
        TEMPCTN_SIZE VARCHAR2(12),
        TEMPCARRY_START_TIME VARCHAR2(19),
        TEMPCTN_MOVE_TIME VARCHAR2(19),
        TEMPCTN_MOVE_TYPE VARCHAR2(10),
        TEMPFROM_POSITION_BLOCK VARCHAR2(10),
        TEMPTO_POSITION_BLOCK VARCHAR2(10),
        TEMPMOVE_KIND VARCHAR2(10),
        TEMPTT NUMBER,
        TEMPTNUM NUMBER
   ) ON COMMIT DELETE ROWS ;
--error 5019
show create table test.test_temp;

##22、修改索引状态
##25、修改主键约束失败导致表被删除
CREATE TABLE test.BOK_KXPLAN
   (    PLANNING_NO CHAR(10),
        HOLD_FLAG CHAR(1),
        CANCEL_FLAG CHAR(1),
        PLAN_COMPANY VARCHAR2(5),
        PAYMENT_TERM CHAR(1),
        PAID_FLAG CHAR(1),
        SELECT_METHOD CHAR(1) DEFAULT '1',
        PLAN_TIME VARCHAR2(19),
        NUM_UNLINE VARCHAR2(10) DEFAULT '0'
   );

   COMMENT ON COLUMN test.BOK_KXPLAN.PLANNING_NO IS '计划号';
   COMMENT ON COLUMN test.BOK_KXPLAN.HOLD_FLAG IS '当对还未进场的箱子进行预先锁定时，此字段的值为''Y''';
   COMMENT ON COLUMN test.BOK_KXPLAN.CANCEL_FLAG IS '''N''表示此计划有效,''Y''表示此计划无效';
   COMMENT ON COLUMN test.BOK_KXPLAN.PLAN_COMPANY IS '申请做此计划的公司代码';
   COMMENT ON COLUMN test.BOK_KXPLAN.PAYMENT_TERM IS '付费方式。''C'':现付,''B''：托收,''N''：不收';
   COMMENT ON COLUMN test.BOK_KXPLAN.PAID_FLAG IS '此计划若需支付费用，是否已付';
   COMMENT ON COLUMN test.BOK_KXPLAN.SELECT_METHOD IS '用''1'',''2''等表示此计划是按箱号还是按数量做';
   
  ALTER TABLE test.BOK_KXPLAN ADD CONSTRAINT PK_BOK_KXPLAN PRIMARY KEY (PLANNING_NO)
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDB  ENABLE;
  ALTER TABLE test.BOK_KXPLAN MODIFY (PLANNING_NO NOT NULL ENABLE);
  CREATE INDEX test.BOK_KXPLAN_index1 ON test.BOK_KXPLAN (HOLD_FLAG);
ALTER INDEX test.BOK_KXPLAN_index1  UNUSABLE;
show create table test.BOK_KXPLAN;

##26、创建索引时含 TRIM()函数
##30、创建唯一约束含存储信息
CREATE TABLE test.STA_TRA_DETAIL
   (    TRAIN_REFERENCE VARCHAR2(12),
        TRAIN_IE VARCHAR2(1),
        SERVICE_CODE VARCHAR2(6),
        LOADDIS_PLACE_CODE VARCHAR2(5),
        CTN_SIZE VARCHAR2(2),
        CTN_TYPE VARCHAR2(2),
        CTN_CATEGORY VARCHAR2(1),
        CTN_STATUS VARCHAR2(1),
        CTN_OPERATOR_CODE VARCHAR2(10),
        CLASS VARCHAR2(4),
        TRADE_NW VARCHAR2(1)
	);
 ALTER TABLE test.STA_TRA_DETAIL ADD CONSTRAINT STA_TRA_DETAIL_UK UNIQUE (TRAIN_REFERENCE, TRAIN_IE, LOADDIS_PLACE_CODE, CTN_SIZE, CTN_TYPE, CTN_CATEGORY, CTN_STATUS, CTN_OPERATOR_CODE,CLASS, TRADE_NW)
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE HOSTDBSTATDATA  ENABLE;
CREATE INDEX test.STA_TRA_DETAIL_index1 ON test.STA_TRA_DETAIL (TRIM(TRAIN_IE), TRIM(CTN_TYPE));
show create table test.STA_TRA_DETAIL;


########################################################################################################
