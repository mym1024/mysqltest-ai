##############################################################################################
###1.测试功能点：in子查询各种场景测试
##                  
#                                     
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：
###4.问题号：
###5.预计运行时间：10s
###6.编写/修改人： huangpeng
###7.编写/修改日期：2019-11-11
###8.其他（选填）：case格式规范化修改
###
##
#
##############################################################################################

#####################################Do sql###################################################
--disable_warnings
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9,t10;
--enable_warnings

###创建表并且初始化
create table t1(c1 int primary key,c2 int,c3 varchar(30));
create table t2(c1 int primary key,c2 int,c3 varchar(30));
create table t3(c1 int primary key,c2 int,c3 varchar(30));
create table t4(c1 int primary key,c2 int,c3 varchar(30));
create table t5(c1 int primary key,c2 int,c3 varchar(30));
create table t6(c1 int primary key,c2 int,c3 varchar(30));
create table t7(c1 int primary key,c2 int,c3 varchar(30));
create table t8(c1 int primary key,c2 int,c3 varchar(30));
create table t9(c1 int primary key,c2 int,c3 varchar(30));
create table t10(c1 int primary key,c2 int,c3 varchar(30),c4 timestamp,c5 int,c6 double);
--real_sleep 3
insert into t1 values(1,1,'a'),(2,2,'b');
insert into t2 values(1,1,'a'),(2,2,'b');
insert into t3 values(1,1,'a'),(2,2,'b');
insert into t4 values(1,1,'a'),(2,2,'b');
insert into t5 values(1,1,'a'),(2,2,'b');
insert into t6 values(1,1,'a'),(2,2,'b');
insert into t7 values(1,1,'a'),(2,2,'b');
insert into t8 values(1,1,'a'),(2,2,'b');
insert into t9 values(1,1,'a'),(2,2,'b');
insert into t10 values(1,1,'a','2015-9-30 00:00:00',1000,3.56),(2,2,'b','2015-9-30 00:00:00',2000,3.56);

select * from t1;
select * from t2;
select * from t3;
select * from t4;
select * from t5;
select * from t6;
select * from t7;
select * from t8;
select * from t9;
select * from t10;

select * from t8 where c1 in(select c1 from t8 a where a.c1 in(select c1 from t8 b where b.c1 < 3));
select * from t8 where c1 in(select c1 from t8 a where a.c1 in(select c1 from t8 b where b.c1 < 3));
(select * from t8 a where c1 in(select c1 from t8  where c1 = 1)) union (select * from t8 a where c1 in(select c1 from t8  where c1 = 1));
(select * from t8  where c1 in(select c1 from t8 b where b.c1 = 1)) union (select * from t8  where c1 in(select c1 from t8 b where b.c1 = 1));
(select * from t8 a where c1 in(select c1 from t8 b where b.c1 = 1)) union (select * from t8 a where c1 in(select c1 from t8 b where b.c1 = 1));


select count(*) from t3 where (c1 + 1,c2 + 1) in(select c1, c2 from t3);
select count(*) from t3 where (c1 + 1,c2 + 1) in(select c1, c2 from t4);

select * from t9 where c1 in(select 2);
select 2 from t9 where c1 in(select c1 from t9);
select 2 from t9 where c1 in(select c1 from t9);
select 2 from t9 where c1 in(select 2);
select 2 from t9 where c1 in(select 2 from t9);
select * from t9 where c1 * 2 in(select c1 from t9);
select * from t9 where c1 * 2 in(select c1 from t9);
select * from t9 where c1 / 2 in(select c1 from t9);
select * from t9 where c1 / 2 in(select c1 from t9);
select * from t9 where c1  in(select c1 / 2 from t9);
select * from t9 where c1  in(select c1 / 2 from t9);
select * from t9 where c1  in(select c1 * 2 from t9);
select * from t9 where c1  in(select c1 * 2 from t9);

select count(*) from t9 where c1 + c2  in(select c1 + c2 from t9 where c1 < 10000);
select count(*) from t9 where c1 + c2  in(select c1 + c2 from t9 where c1 < 9000);
select count(*) from t9 where c1  in(select c2 from t9);
select count(*) from t9 where c1  in(select c2 from t9);

explain select * from t9 where c1 in(select c1 from t9);
explain select * from t9 where c1 in(select c1 from t9);
explain select count(*) from t2 where c1 in(select c1 from t2 where c1 > 1);

select * from t9 where c1 * 0 in(select c1 from t9);
select * from t9 where c1 * 0 in(select c1 from t9);

--error 5601
select * from t9 where c1 in(select c1 from t9) and (select c2 from t9);
select * from t9 where c1 in(select c1 from t9) and (select c2 from t9 where c2 = 4);
--error 5601
select * from t3 where c1 in(select c1 from t3) or (select c1 from t3);
select * from t3 where c1 in(select c1 from t3 where c3 = 'c') or (select c1 from t3 where c3 = 'b');
select * from t9 where c1 in(select c1 from t9) and c2 in(select c2 from t9);
select * from t9 where c1 in(select c1 from t9) and c2 in(select c2 from t9 where c2 = 4);
select * from t3 where c1 in(select c1 from t3) or c1 in(select c1 from t4);
select * from t3 where c1 in(select c1 from t3 where c3 = 'c') or c1 in(select c1 from t4 where c3 = 'b');
select * from t3 where c1 in(1,2);
select * from t3 where c1 in(select c1 from t3 where c3 = 'c') and c1 = 3;
select * from t3 where c1 in(select c1 from t4 where c3 = 'c') and c1 = 3;
select * from t3 where c1 in(select c1 from t3 where c3 = 'c') or c1 = 1;
select * from t3 where c1 in(select c1 from t4 where c3 = 'c') or c1 = 1;
select * from t3 where c3 in(select c3 from t3 where c3 in (select c3 from t3 where c3 = 'c'));
select * from t3 where c3 in(select c3 from t4 where c3 in (select c3 from t4 where c3 = 'c'));
select * from t3 where c3 in(select c3 from t3 where c3 = 'b') and c1 in(1,2);
select * from t3 where c3 in(select c3 from t4 where c3 = 'b') and c1 in(1,2);
select * from t3 where c3 in(select c3 from t3 where c3 = 'b') or c1 in(1,2);
select * from t3 where c3 in(select c3 from t4 where c3 = 'b') or c1 in(1,2);
select * from t3 where c3 in(select c3 from t4 where c3 = 'b') and c1 in(select 2 from t4);
select * from t3 where c3 in(select c3 from t4 where c3 = 'b') and c1 in(select 2 from t3);
select * from t3 where c3 in(select c3 from t4 where c3 = 'b') or c1 in(select 2 from t4);
select * from t3 where c3 in(select c3 from t4 where c3 = 'b') or c1 in(select 2 from t3);
select * from t3 where c3 in(select c3 from t3 where c3 = 'b') and c1 in(select 2) or c1 > 1;
select * from t3 where c3 in(select c3 from t4 where c3 = 'b') and c1 in(select 2) or c1 > 1;
select * from t10 where c4 in(select c4 from t10 where c1 = 1);
select * from t10 where c5 in(select c5 from t10 where c1 = 1);
select * from t10 where c6 in(select c6 from t10 where c1 = 1);
select sum(c1) from t10 where c1 in(select c1 from t10);
select sum(c1) from t10 where c1 in(select c1 from t3);
select * from t10 where c1 in(select min(c1) from t10);
select * from t10 where c1 in(select min(c1) from t3);
select sum(c1) from t10 where c1 in(select min(c1) from t10);
select sum(c1) from t10 where c1 in(select min(c1) from t3);
select * from t10 where c1 in(select (count(t3.c1) - 1)*2-3 from t3,t4 where t3.c1 = t4.c1);
select * from t10 where c1 in(select t3.c1 from t3,t4 where t3.c1 = t4.c1);
select * from t10 where c1 in(select t3.c1 from t3,t4 where t3.c1 = t4.c1) or c1 = 1 or c6 = 3.56 or c1 in(1,2);
select * from t10 where c1 in(select t3.c1 from t3,t4 where t3.c1 = t4.c1) or c1 = 1 or c6 = 3.56 or c1 in(1,2);
select * from t10 where c1 in(select t3.c1 from t3,t4 where t3.c1 = t4.c1) or c1 = 1 or c6 = 3.56 and c1 in(1,2);
select count(t3.c1) from t3,t4 where t3.c1 = t4.c1 or t3.c1 in(1,2);
select count(t3.c1) from t3,t4 where t3.c1 = t4.c1 and t3.c1 in(1,2);
select count(*) from t9 ta,t9 tb where ta.c1 = tb.c1 or ta.c1 in(1,2);
select count(*) from t9 ta,t9 tb where ta.c1 = tb.c1 and ta.c1 in(1,2);
select * from t3,t4  where t3.c1 = t4.c1 or (t3.c1,t4.c1) in(select 1,2);
select * from t3,t4  where t3.c1 = t4.c1 and (t3.c1,t4.c1) in(select 1,2);
select count(*) from t2,t1  where t2.c1 = t1.c1 and (t2.c1,t1.c1) in(select 1,1);
select count(*) from t3  where c1 in(select c1 is not null from t3);
select count(*) from t3  where c1 in(select c1 is not null from t4);
select * from t3  where c1 in(select c1 from t3 where c1 is not null and c1 > 1);
select * from t3  where c1 in(select c1 from t4 where c1 is not null and c1 > 1);
select * from t3  where c1 in(select c1 between 1 and 2 from t3);
select * from t3  where c1 in(select count(*) from t3 left join t4 on t3.c1 = t4.c1);
select * from t3  where c1 in(select count(*) from t3 right join t4 on t3.c1 = t4.c1);
select * from t3  where c1 in(select count(*) from t3 full join t4 on t3.c1 = t4.c1);
select * from t3  where c1 in(select 1 from t3 union all select 2 from t3);
select * from t3  where c1 in(select 1 from t3 union all select 2 from t4);
select * from t3  where c1 in(select count(*) from t3 union select count(*) from t3);
select * from t3  where c1 in(select count(*) from t3 union select count(*) from t4);
select * from t9  where c1 in(select c1 from t9 where c1 < 3 )union select * from t9 where c1 = 2;
select * from t9  where c1 in(select c1 from t9 where c1 < 3 )union select * from t9 where c1 = 2;
select * from t3  where c1 in(select 1 from t3 except select 2 from t3);
select * from t3  where c1 in(select 1 from t3 except select 2 from t4);
select * from t3  where c1 in(select count(*) from t3 except select count(*) from t3);



###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
