--source merge.sql
##############################################################################################
###1.测试功能点：有索引表的数据表，读未提交隔离级别(一个长事务中插入多条索引列相同，主键列不同的记录)
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：2404s
###6.编写/修改人：wangsuxiang
###7.编写/修改日期：2019-10-14
###8.其他（选填）：case格式规范化修改
###
##
#
##############################################################################################

#####################################Do sql###################################################
alter system set balance_max_concurrent_migrate_num=30 server_type=yaoadminsvr;
alter system set balance_max_migrate_in_per_ds=6 server_type=yaoadminsvr;
alter system set balance_max_migrate_out_per_ds=6 server_type=yaoadminsvr;
alter system set max_migrate_task_count=6 server_type=yaodatasvr;

--disable_warnings
drop table if exists c;
--enable_warnings

--disable_query_log
--enable_query_log


create table c (c1 int primary key,c2 varchar(8)) ;
create index c_index on c(c2);

show index on c;

###2-1：set autocommit=0
connect (conn1,$OBMYSQL_MS0,admin,admin,test,$OBMYSQL_PORT);
connect (conn2,$OBMYSQL_MS0,admin,admin,test,$OBMYSQL_PORT);
connection conn1;
set autocommit=0;
insert into c values(1,1);
insert into c values(10,1);
insert into c values(100,1);
insert into c values(1000,1);
insert into c values(1500,1);
insert into c values(3000,1);
insert into c values(10000,1);
insert into c values(50000,1);
insert into c values(100000,1);
insert into c values(1000000,1);
select * from c where c1=1;
select * from c where c1=10;
select * from c where c1=100;
select * from c where c1=1000;
select * from c where c1=1500;
select * from c where c1=3000;
select * from c where c1=10000;
select * from c where c1=50000;
select * from c where c1=100000;
select * from c where c1=1000000;
select * from c where c2=1;
select * from c;
connection conn2;
set autocommit=0;
select * from c where c1=1;
select * from c where c1=10;
select * from c where c1=100;
select * from c where c1=1000;
select * from c where c1=1500;
select * from c where c1=3000;
select * from c where c1=10000;
select * from c where c1=50000;
select * from c where c1=100000;
select * from c where c1=1000000;
select * from c where c2=1;
select * from c;
commit;
connection conn1;
commit;
###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
