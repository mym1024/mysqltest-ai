####################################必填######################################################
###1.测试功能点：主键更新的explain测试
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：xxx
###6.编写/修改人：张二宝
###7.编写/修改日期：2019-11-04
###8.其他（选填）：xxx
###
##
#
##############################################################################################

#####################################Do sql###################################################
create database rowkey_database;
using database rowkey_database;
sleep 5;

###建表插入数据
create table if not exists t(id1 int primary key, col1 int);
replace into t values(0, 0);
replace into t values(1, 0);
replace into t values(2, 0);

###2-1：单行更新主键物理计划打印
#do sql
explain update t set id1=id1+10, col1=1 where id1=0;

###2-2：多行更新主键物理计划打印
#do sql
explain update t set id1=id1+1, col1=1 where id1>=0;

###2-3：不支持单行主键更新作为when的条件
#do sql
--error 163
delete from t where id1=2 when row_count(update t set id1=9 where id1=2);

###2-4：不支持多行主键更新作为when的条件
#do sql
--error 163
delete from t where id1=2 when row_count(update t set id1=9 where id1>=1);

select * from t;
drop table if exists t;


###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
