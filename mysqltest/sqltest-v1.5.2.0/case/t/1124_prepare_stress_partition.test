####################################必填######################################################
###1.测试功能点：在指定分区规则表使用prepare多次执行操作,
##
#
###2.测试项：(每新添一测试项, 需在添加前注明测试项, 注释填写在新添sq1前, 不填在此处, 如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：xxx
###6.编写/修改人：zhuyinying
###7.编写/修改日期：2020-01-13
###8.其他（选填）：case格式规范化修改
###
##
#
##############################################################################################
#
#####################################Do sql####################################################
--disable_warnings
drop table if exists t1,t2;
--enable_warnings
--disable_abort_on_error

--error 5077
drop partition function h;
create hash partition function h(x) 'x+1';
create table t1(i int primary key, c1 char(1), c256 char(256), dt datetime, d datetime, ct createtime, mt modifytime)partition by(hs,h,i);
--error 5077
drop partition function e;
create enum partition function e(x) '[(1)],[(3)]';
create table t2(i int primary key, c1 char(1), c256 char(256), dt datetime, d datetime, ct createtime, mt modifytime)partition by(em,e,i);
replace into t1(i,c1,c256,dt,d) values(0,'1','xqy','2012-10-10 12:00:00','2012-10-10');
replace into t1(i,c1,c256,dt,d) values(1,'1','xqy','2012-10-10 12:00:00','2012-10-10');
replace into t1(i,c1,c256,dt,d) values(2,'1','xqy','2012-10-10 12:00:00','2012-10-10');
replace into t1(i,c1,c256,dt,d) values(3,'1','xqy','2012-10-10 12:00:00','2012-10-10');
replace into t1(i,c1,c256,dt,d) values(4,'1','xqy','2012-10-10 12:00:00','2012-10-10');



let $i=0;
--disable_query_log
--disable_result_log
--echo prepare same select clause repeatedly
while($i<10000)
{

    prepare stmt1 from select c1,dt from t1 where c256=?;
    set @c256='xqy';
    execute stmt1 using @c256;
    inc $i;
}

let $i=0;
--echo prepare same replace clause repeatedly
while($i<10000)
{

    prepare stmt1 from replace into t1(i,c1,c256,dt,d) values (5,'1',?,'2012-10-10 12:00:00','2012-10-10');
    set @c256='xh1';
    execute stmt1 using @c256;
    inc $i;
}

let $i=0;
--echo prepare same insert clause repeatedly
while($i<10000)
{

    prepare stmt1 from insert into t1(i,c1,c256,dt,d) values ($i,'1',?,'2012-10-10 12:00:00','2012-10-10');
    set @c256='xh1';
    execute stmt1 using @c256;
    inc $i;
}

let $i=0;
--echo prepare same update clause repeatedly
while($i<10000)
{

    prepare stmt1 from update t1 set c256=? where i=6;
    set @c256='cly';
    execute stmt1 using @c256;
    inc $i;
}

let $i=0;
--echo prepare same delete clause repeatedly
while($i<10000)
{

    prepare stmt1 from delete from  t1 where i=?;
    set @id=2;
    execute stmt1 using @id;
    inc $i;
}



###///新添测试项///###
###2-x：（新增测试项说明）
#do sql
#####################################Do sql####################################################
