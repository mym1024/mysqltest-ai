####################################必填######################################################
###1.测试功能点：decimal列的值范围验证
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：xxx
###6.编写/修改人：zhuyinying
###7.编写/修改日期：2019-12-20
###8.其他（选填）：case格式标准化修改
###
##
#
##############################################################################################

#####################################Do sql###################################################
create database test_decimal;
using database test_decimal;
sleep 5;


###2-1：decimal列的值在设定范围内与范围外验证
#do sql
create table if not exists t1(c1 int primary key, c2 decimal(3,2));
desc t1;
insert into t1 values(1, 1);
insert into t1 values(2, 1.2);
insert into t1 values(3, 1.23);
select * from t1;
select *,c1+c2 from t1 where c1=3 for update;
# 验证decimal列查出范围
--error 58
insert into t1 values(4, 12.12);

###2-2：修改decimal列的范围后，测试是否符合预期
#do sql
alter table t1 alter column c2 set data type decimal(38,2);
desc t1;
insert into t1 values(4, 12.12);
insert into t1 values(5, 12345.123);
insert into t1 values(6, 123456.123);
insert into t1 values(7, 1234567890123456789.12);
select * from t1;
select * from t1 where c1=6 for update;
drop table if exists t1;

create table if not exists t2(c1 int primary key, c2 decimal(3,2));
desc t2;
insert into t2 values(1, 1.1);
insert into t2 values(2, 1.2);
insert into t2 values(3, 1.23);
select * from t2;
select *,c1+c2 from t2 where c1=3 for update;
--error 58
insert into t2 values(4, 12.12);

alter table t2 alter column c2 set data type decimal(38,37);
desc t2;
--error 58
insert into t2 values(5, 12.12);
insert into t2 values(6, 1.234);
insert into t2 values(7, 1.23);
insert into t2 values(8, 1.2);
insert into t2 values(9, 1);
select * from t2;
select *,c1+c2 from t2 where c1=7 for update;

drop table if exists t2;
drop database test_decimal;


###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
