--source merge.sql
####################################必填######################################################
###1.测试功能点：修改列的默认值
##
#
###2.测试项：(每新添一测试项，需在添加前注明测试项，注释填写在新添sq1前，不填在此处，如下样例）
###3.问题网址：xxx
###4.问题号：xxx
###5.预计运行时间：18min
###6.编写/修改人：liuchangyuan
###7.编写/修改日期：2019-10-18
###8.其他（选填）：xxx 
###
##
#
##############################################################################################

#####################################Do sql###################################################
alter system set balance_max_concurrent_migrate_num=30 server_type=yaoadminsvr;
alter system set balance_max_migrate_in_per_ds=6 server_type=yaoadminsvr;
alter system set balance_max_migrate_out_per_ds=6 server_type=yaoadminsvr;
alter system set max_migrate_task_count=6 server_type=yaodatasvr;

create table t5(c1 int primary key, c2 int default 10, c3 bigint default 100,c4 float default 1.11, c5 double default 2.22,
	c6 datetime default '2017-09-11 15:36:01', c7 timestamp default '2016-08-12 11:36:01',
	c8 date default '2017-09-11', c9 time default '15:36:01',c10 timestamp default 1503799330000000,
	c11 varchar(20) default 'aaa', c12 bool default true, c13 bool default 1, c14 decimal(20,2) default 3.33,
	c15 tinyint default 2, c16 smallint default 134, c17 mediumint default 178,
	c19 real default 5.55, c20 char(5) default 'bbb', c21 binary(4) default '1111',c22 varbinary(4) default '0000');
desc t5;

###2-1：(使用'default'默认值插入数据)
##do sql 
insert into t5(c1) values(1);
replace into t5(c1) values(2);
replace into t5(c1,c2) values(1,default);
replace into t5(c1,c2) values(2,default);
select * from t5;

###2-2：(删除默认值后不可以使用'default'默认值插入数据)
##do sql 
insert into t5 values(3, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default);
alter table t5 alter column c2 drop default;

--error 5425
insert into t5 values(3, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default);
select * from t5;

###2-3：(使用'default'默认值更新数据)
##do sql
update t5 set c3=99 where c1=1;
select * from t5;
update t5 set c3=default where c1=1;
select * from t5;

select * from t5;
drop table t5;

###///新添测试项///###
###2-x:(新增测试项说明)
#do sql
########################################################################################################
